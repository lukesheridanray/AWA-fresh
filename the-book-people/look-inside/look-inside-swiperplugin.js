//
// CGIT Optimizely Boilerplate - version 0.1.3
//


// JSHint flags
// jshint multistr: true
// jshint jquery: true

/* Third party libs */

/*!
    Zoom 1.7.13
    license: MIT
    http://www.jacklmoore.com/zoom
*/
(function(o){var t={url:!1,callback:!1,target:!1,duration:120,on:"mouseover",touch:!0,onZoomIn:!1,onZoomOut:!1,magnify:1};o.zoom=function(t,n,e,i){var u,c,a,m,l,r,s,f=o(t).css("position"),h=o(n);return t.style.position=/(absolute|fixed)/.test(f)?f:"relative",t.style.overflow="hidden",e.style.width=e.style.height="",o(e).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:e.width*i,height:e.height*i,border:"none",maxWidth:"none",maxHeight:"none"}).appendTo(t),{init:function(){c=o(t).outerWidth(),u=o(t).outerHeight(),n===t?(m=c,a=u):(m=h.outerWidth(),a=h.outerHeight()),l=(e.width-c)/m,r=(e.height-u)/a,s=h.offset()},move:function(o){var t=o.pageX-s.left,n=o.pageY-s.top;n=Math.max(Math.min(n,a),0),t=Math.max(Math.min(t,m),0),e.style.left=t*-l+"px",e.style.top=n*-r+"px"}}},o.fn.zoom=function(n){return this.each(function(){var e,i=o.extend({},t,n||{}),u=i.target||this,c=this,a=o(c),m=document.createElement("img"),l=o(m),r="mousemove.zoom",s=!1,f=!1;(i.url||(e=a.find("img"),e[0]&&(i.url=e.data("src")||e.attr("src")),i.url))&&(function(){var o=u.style.position,t=u.style.overflow;a.one("zoom.destroy",function(){a.off(".zoom"),u.style.position=o,u.style.overflow=t,l.remove()})}(),m.onload=function(){function t(t){e.init(),e.move(t),l.stop().fadeTo(o.support.opacity?i.duration:0,1,o.isFunction(i.onZoomIn)?i.onZoomIn.call(m):!1)}function n(){l.stop().fadeTo(i.duration,0,o.isFunction(i.onZoomOut)?i.onZoomOut.call(m):!1)}var e=o.zoom(u,c,m,i.magnify);"grab"===i.on?a.on("mousedown.zoom",function(i){1===i.which&&(o(document).one("mouseup.zoom",function(){n(),o(document).off(r,e.move)}),t(i),o(document).on(r,e.move),i.preventDefault())}):"click"===i.on?a.on("click.zoom",function(i){return s?void 0:(s=!0,t(i),o(document).on(r,e.move),o(document).one("click.zoom",function(){n(),s=!1,o(document).off(r,e.move)}),!1)}):"toggle"===i.on?a.on("click.zoom",function(o){s?n():t(o),s=!s}):"mouseover"===i.on&&(e.init(),a.on("mouseenter.zoom",t).on("mouseleave.zoom",n).on(r,e.move)),i.touch&&a.on("touchstart.zoom",function(o){o.preventDefault(),f?(f=!1,n()):(f=!0,t(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0]))}).on("touchmove.zoom",function(o){o.preventDefault(),e.move(o.originalEvent.touches[0]||o.originalEvent.changedTouches[0])}),o.isFunction(i.callback)&&i.callback.call(m)},m.src=i.url)})},o.fn.zoom.defaults=t})(window.jQuery);
/*! sly 1.2.6 - 11th Oct 2014 | https://github.com/darsain/sly */
!function(a,b,c){"use strict";function d(b,o,p){function J(){var c=0,d=Fb.length;if(xb.old=a.extend({},xb),vb=sb?0:tb[qb.horizontal?"width":"height"](),Ab=yb[qb.horizontal?"width":"height"](),wb=sb?b:ub[qb.horizontal?"outerWidth":"outerHeight"](),Fb.length=0,xb.start=0,xb.end=G(wb-vb,0),Mb){c=Hb.length,Gb=ub.children(qb.itemSelector),Hb.length=0;var e,f=j(ub,qb.horizontal?"paddingLeft":"paddingTop"),g=j(ub,qb.horizontal?"paddingRight":"paddingBottom"),h="border-box"===a(Gb).css("boxSizing"),i="none"!==Gb.css("float"),l=0,m=Gb.length-1;wb=0,Gb.each(function(b,c){var d=a(c),h=d[qb.horizontal?"outerWidth":"outerHeight"](),k=j(d,qb.horizontal?"marginLeft":"marginTop"),n=j(d,qb.horizontal?"marginRight":"marginBottom"),o=h+k+n,p=!k||!n,q={};q.el=c,q.size=p?h:o,q.half=q.size/2,q.start=wb+(p?k:0),q.center=q.start-F(vb/2-q.size/2),q.end=q.start-vb+q.size,b||(wb+=f),wb+=o,qb.horizontal||i||n&&k&&b>0&&(wb-=H(k,n)),b===m&&(q.end+=g,wb+=g,l=p?n:0),Hb.push(q),e=q}),ub[0].style[qb.horizontal?"width":"height"]=(h?wb:wb-f-g)+"px",wb-=l,Hb.length?(xb.start=Hb[0][Kb?"center":"start"],xb.end=Kb?e.center:wb>vb?e.end:xb.start):xb.start=xb.end=0}if(xb.center=F(xb.end/2+xb.start/2),U(),zb.length&&Ab>0&&(qb.dynamicHandle?(Bb=xb.start===xb.end?Ab:F(Ab*vb/wb),Bb=k(Bb,qb.minHandleSize,Ab),zb[0].style[qb.horizontal?"width":"height"]=Bb+"px"):Bb=zb[qb.horizontal?"outerWidth":"outerHeight"](),Cb.end=Ab-Bb,_b||M()),!sb&&vb>0){var n=xb.start,o="";if(Mb)a.each(Hb,function(a,b){Kb?Fb.push(b.center):b.start+b.size>n&&n<=xb.end&&(n=b.start,Fb.push(n),n+=vb,n>xb.end&&n<xb.end+vb&&Fb.push(xb.end))});else for(;n-vb<xb.end;)Fb.push(n),n+=vb;if(Db[0]&&d!==Fb.length){for(var p=0;p<Fb.length;p++)o+=qb.pageBuilder.call(rb,p);Eb=Db.html(o).children(),Eb.eq(Ib.activePage).addClass(qb.activeClass)}}if(Ib.slideeSize=wb,Ib.frameSize=vb,Ib.sbSize=Ab,Ib.handleSize=Bb,Mb){rb.initialized?(Ib.activeItem>=Hb.length||0===c&&Hb.length>0)&&S(Ib.activeItem>=Hb.length?Hb.length-1:0,!c):(S(qb.startAt),rb[Lb?"toCenter":"toStart"](qb.startAt));var q=Hb[Ib.activeItem];K(Lb&&q?q.center:k(xb.dest,xb.start,xb.end))}else rb.initialized?K(k(xb.dest,xb.start,xb.end)):K(qb.startAt,1);nb("load")}function K(a,b,c){if(Mb&&Zb.released&&!c){var d=T(a),e=a>xb.start&&a<xb.end;Lb?(e&&(a=Hb[d.centerItem].center),Kb&&qb.activateMiddle&&S(d.centerItem)):e&&(a=Hb[d.firstItem].start)}Zb.init&&Zb.slidee&&qb.elasticBounds?a>xb.end?a=xb.end+(a-xb.end)/6:a<xb.start&&(a=xb.start+(a-xb.start)/6):a=k(a,xb.start,xb.end),Xb.start=+new Date,Xb.time=0,Xb.from=xb.cur,Xb.to=a,Xb.delta=a-xb.cur,Xb.tweesing=Zb.tweese||Zb.init&&!Zb.slidee,Xb.immediate=!Xb.tweesing&&(b||Zb.init&&Zb.slidee||!qb.speed),Zb.tweese=0,a!==xb.dest&&(xb.dest=a,nb("change"),_b||L()),Y(),U(),V(),N()}function L(){return _b?(Xb.immediate?xb.cur=Xb.to:Xb.tweesing?(Xb.tweeseDelta=Xb.to-xb.cur,C(Xb.tweeseDelta)<.1?xb.cur=Xb.to:xb.cur+=Xb.tweeseDelta*(Zb.released?qb.swingSpeed:qb.syncSpeed)):(Xb.time=H(+new Date-Xb.start,qb.speed),xb.cur=Xb.from+Xb.delta*jQuery.easing[qb.easing](Xb.time/qb.speed,Xb.time,0,1,qb.speed)),Xb.to===xb.cur?(xb.cur=Xb.to,Zb.tweese=_b=0):_b=s(L),nb("move"),sb||(l?ub[0].style[l]=m+(qb.horizontal?"translateX":"translateY")+"("+-xb.cur+"px)":ub[0].style[qb.horizontal?"left":"top"]=-F(xb.cur)+"px"),!_b&&Zb.released&&nb("moveEnd"),void M()):(_b=s(L),void(Zb.released&&nb("moveStart")))}function M(){zb.length&&(Cb.cur=xb.start===xb.end?0:((Zb.init&&!Zb.slidee?xb.dest:xb.cur)-xb.start)/(xb.end-xb.start)*Cb.end,Cb.cur=k(F(Cb.cur),Cb.start,Cb.end),Wb.hPos!==Cb.cur&&(Wb.hPos=Cb.cur,l?zb[0].style[l]=m+(qb.horizontal?"translateX":"translateY")+"("+Cb.cur+"px)":zb[0].style[qb.horizontal?"left":"top"]=Cb.cur+"px"))}function N(){Eb[0]&&Wb.page!==Ib.activePage&&(Wb.page=Ib.activePage,Eb.removeClass(qb.activeClass).eq(Ib.activePage).addClass(qb.activeClass),nb("activePage",Wb.page))}function O(){Yb.speed&&xb.cur!==(Yb.speed>0?xb.end:xb.start)||rb.stop(),cc=Zb.init?s(O):0,Yb.now=+new Date,Yb.pos=xb.cur+(Yb.now-Yb.lastTime)/1e3*Yb.speed,K(Zb.init?Yb.pos:F(Yb.pos)),Zb.init||xb.cur!==xb.dest||nb("moveEnd"),Yb.lastTime=Yb.now}function P(a,b,d){if("boolean"===e(b)&&(d=b,b=c),b===c)K(xb[a],d);else{if(Lb&&"center"!==a)return;var f=rb.getPos(b);f&&K(f[a],d,!Lb)}}function Q(a){return null!=a?i(a)?a>=0&&a<Hb.length?a:-1:Gb.index(a):-1}function R(a){return Q(i(a)&&0>a?a+Hb.length:a)}function S(a,b){var c=Q(a);return!Mb||0>c?!1:((Wb.active!==c||b)&&(Gb.eq(Ib.activeItem).removeClass(qb.activeClass),Gb.eq(c).addClass(qb.activeClass),Wb.active=Ib.activeItem=c,V(),nb("active",c)),c)}function T(a){a=k(i(a)?a:xb.dest,xb.start,xb.end);var b={},c=Kb?0:vb/2;if(!sb)for(var d=0,e=Fb.length;e>d;d++){if(a>=xb.end||d===Fb.length-1){b.activePage=Fb.length-1;break}if(a<=Fb[d]+c){b.activePage=d;break}}if(Mb){for(var f=!1,g=!1,h=!1,j=0,l=Hb.length;l>j;j++)if(f===!1&&a<=Hb[j].start+Hb[j].half&&(f=j),h===!1&&a<=Hb[j].center+Hb[j].half&&(h=j),j===l-1||a<=Hb[j].end+Hb[j].half){g=j;break}b.firstItem=i(f)?f:0,b.centerItem=i(h)?h:b.firstItem,b.lastItem=i(g)?g:b.centerItem}return b}function U(b){a.extend(Ib,T(b))}function V(){var a=xb.dest<=xb.start,b=xb.dest>=xb.end,c=a?1:b?2:3;if(Wb.slideePosState!==c&&(Wb.slideePosState=c,Tb.is("button,input")&&Tb.prop("disabled",a),Ub.is("button,input")&&Ub.prop("disabled",b),Tb.add(Qb)[a?"addClass":"removeClass"](qb.disabledClass),Ub.add(Pb)[b?"addClass":"removeClass"](qb.disabledClass)),Wb.fwdbwdState!==c&&Zb.released&&(Wb.fwdbwdState=c,Qb.is("button,input")&&Qb.prop("disabled",a),Pb.is("button,input")&&Pb.prop("disabled",b)),Mb){var d=0===Ib.activeItem,e=Ib.activeItem>=Hb.length-1,f=d?1:e?2:3;Wb.itemsButtonState!==f&&(Wb.itemsButtonState=f,Rb.is("button,input")&&Rb.prop("disabled",d),Sb.is("button,input")&&Sb.prop("disabled",e),Rb[d?"addClass":"removeClass"](qb.disabledClass),Sb[e?"addClass":"removeClass"](qb.disabledClass))}}function W(a,b,c){if(a=R(a),b=R(b),a>-1&&b>-1&&a!==b&&(!c||b!==a-1)&&(c||b!==a+1)){Gb.eq(a)[c?"insertAfter":"insertBefore"](Hb[b].el);var d=b>a?a:c?b:b-1,e=a>b?a:c?b+1:b,f=a>b;a===Ib.activeItem?Wb.active=Ib.activeItem=c?f?b+1:b:f?b:b-1:Ib.activeItem>d&&Ib.activeItem<e&&(Wb.active=Ib.activeItem+=f?1:-1),J()}}function X(a,b){for(var c=0,d=Vb[a].length;d>c;c++)if(Vb[a][c]===b)return c;return-1}function Y(){Zb.released&&!rb.isPaused&&rb.resume()}function Z(a){return F(k(a,Cb.start,Cb.end)/Cb.end*(xb.end-xb.start))+xb.start}function $(){Zb.history[0]=Zb.history[1],Zb.history[1]=Zb.history[2],Zb.history[2]=Zb.history[3],Zb.history[3]=Zb.delta}function _(a){Zb.released=0,Zb.source=a,Zb.slidee="slidee"===a}function ab(b){var c="touchstart"===b.type,d=b.data.source,e="slidee"===d;Zb.init||!c&&db(b.target)||("handle"!==d||qb.dragHandle&&Cb.start!==Cb.end)&&(!e||(c?qb.touchDragging:qb.mouseDragging&&b.which<2))&&(_(d),Zb.init=0,Zb.$source=a(b.target),Zb.touch=c,Zb.pointer=c?b.originalEvent.touches[0]:b,Zb.initX=Zb.pointer.pageX,Zb.initY=Zb.pointer.pageY,Zb.initPos=e?xb.cur:Cb.cur,Zb.start=+new Date,Zb.time=0,Zb.path=0,Zb.delta=0,Zb.locked=0,Zb.history=[0,0,0,0],Zb.pathToLock=e?c?30:10:0,t.on(c?w:v,bb),rb.pause(1),(e?ub:zb).addClass(qb.draggedClass),nb("moveStart"),e&&(ac=setInterval($,10)))}function bb(a){if(Zb.released="mouseup"===a.type||"touchend"===a.type,Zb.pointer=Zb.touch?a.originalEvent[Zb.released?"changedTouches":"touches"][0]:a,Zb.pathX=Zb.pointer.pageX-Zb.initX,Zb.pathY=Zb.pointer.pageY-Zb.initY,Zb.path=D(E(Zb.pathX,2)+E(Zb.pathY,2)),Zb.delta=qb.horizontal?Zb.pathX:Zb.pathY,!Zb.init){if(!(qb.horizontal?C(Zb.pathX)>C(Zb.pathY):C(Zb.pathX)<C(Zb.pathY)))return cb();Zb.init=1}f(a),!Zb.locked&&Zb.path>Zb.pathToLock&&Zb.slidee&&(Zb.locked=1,Zb.$source.on(y,g)),Zb.released&&(cb(),qb.releaseSwing&&Zb.slidee&&(Zb.swing=(Zb.delta-Zb.history[0])/40*300,Zb.delta+=Zb.swing,Zb.tweese=C(Zb.swing)>10)),K(Zb.slidee?F(Zb.initPos-Zb.delta):Z(Zb.initPos+Zb.delta))}function cb(){clearInterval(ac),t.off(Zb.touch?w:v,bb),(Zb.slidee?ub:zb).removeClass(qb.draggedClass),setTimeout(function(){Zb.$source.off(y,g)}),rb.resume(1),xb.cur===xb.dest&&Zb.init&&nb("moveEnd"),Zb.init=0}function db(b){return~a.inArray(b.nodeName,A)||a(b).is(qb.interactive)}function eb(){rb.stop(),t.off("mouseup",eb)}function fb(a){switch(f(a),this){case Pb[0]:case Qb[0]:rb.moveBy(Pb.is(this)?qb.moveBy:-qb.moveBy),t.on("mouseup",eb);break;case Rb[0]:rb.prev();break;case Sb[0]:rb.next();break;case Tb[0]:rb.prevPage();break;case Ub[0]:rb.nextPage()}}function gb(a){return $b.curDelta=(qb.horizontal?a.deltaY||a.deltaX:a.deltaY)||-a.wheelDelta,$b.curDelta/=1===a.deltaMode?3:100,Mb?(n=+new Date,$b.last<n-$b.resetTime&&($b.delta=0),$b.last=n,$b.delta+=$b.curDelta,C($b.delta)<1?$b.finalDelta=0:($b.finalDelta=F($b.delta/1),$b.delta%=1),$b.finalDelta):$b.curDelta}function hb(a){var b=+new Date;return I+300>b?void(I=b):void(qb.scrollBy&&xb.start!==xb.end&&(f(a,1),rb.slideBy(qb.scrollBy*gb(a.originalEvent))))}function ib(a){qb.clickBar&&a.target===yb[0]&&(f(a),K(Z((qb.horizontal?a.pageX-yb.offset().left:a.pageY-yb.offset().top)-Bb/2)))}function jb(a){if(qb.keyboardNavBy)switch(a.which){case qb.horizontal?37:38:f(a),rb["pages"===qb.keyboardNavBy?"prevPage":"prev"]();break;case qb.horizontal?39:40:f(a),rb["pages"===qb.keyboardNavBy?"nextPage":"next"]()}}function kb(a){return db(this)?void a.stopPropagation():void(this.parentNode===ub[0]&&rb.activate(this))}function lb(){this.parentNode===Db[0]&&rb.activatePage(Eb.index(this))}function mb(a){qb.pauseOnHover&&rb["mouseenter"===a.type?"pause":"resume"](2)}function nb(a,b){if(Vb[a]){for(pb=Vb[a].length,B.length=0,ob=0;pb>ob;ob++)B.push(Vb[a][ob]);for(ob=0;pb>ob;ob++)B[ob].call(rb,a,b)}}var ob,pb,qb=a.extend({},d.defaults,o),rb=this,sb=i(b),tb=a(b),ub=tb.children().eq(0),vb=0,wb=0,xb={start:0,center:0,end:0,cur:0,dest:0},yb=a(qb.scrollBar).eq(0),zb=yb.children().eq(0),Ab=0,Bb=0,Cb={start:0,end:0,cur:0},Db=a(qb.pagesBar),Eb=0,Fb=[],Gb=0,Hb=[],Ib={firstItem:0,lastItem:0,centerItem:0,activeItem:-1,activePage:0},Jb="basic"===qb.itemNav,Kb="forceCentered"===qb.itemNav,Lb="centered"===qb.itemNav||Kb,Mb=!sb&&(Jb||Lb||Kb),Nb=qb.scrollSource?a(qb.scrollSource):tb,Ob=qb.dragSource?a(qb.dragSource):tb,Pb=a(qb.forward),Qb=a(qb.backward),Rb=a(qb.prev),Sb=a(qb.next),Tb=a(qb.prevPage),Ub=a(qb.nextPage),Vb={},Wb={},Xb={},Yb={},Zb={released:1},$b={last:0,delta:0,resetTime:200},_b=0,ac=0,bc=0,cc=0;sb||(b=tb[0]),rb.initialized=0,rb.frame=b,rb.slidee=ub[0],rb.pos=xb,rb.rel=Ib,rb.items=Hb,rb.pages=Fb,rb.isPaused=0,rb.options=qb,rb.dragging=Zb,rb.reload=J,rb.getPos=function(a){if(Mb){var b=Q(a);return-1!==b?Hb[b]:!1}var c=ub.find(a).eq(0);if(c[0]){var d=qb.horizontal?c.offset().left-ub.offset().left:c.offset().top-ub.offset().top,e=c[qb.horizontal?"outerWidth":"outerHeight"]();return{start:d,center:d-vb/2+e/2,end:d-vb+e,size:e}}return!1},rb.moveBy=function(a){Yb.speed=a,!Zb.init&&Yb.speed&&xb.cur!==(Yb.speed>0?xb.end:xb.start)&&(Yb.lastTime=+new Date,Yb.startPos=xb.cur,_("button"),Zb.init=1,nb("moveStart"),r(cc),O())},rb.stop=function(){"button"===Zb.source&&(Zb.init=0,Zb.released=1)},rb.prev=function(){rb.activate(Ib.activeItem-1)},rb.next=function(){rb.activate(Ib.activeItem+1)},rb.prevPage=function(){rb.activatePage(Ib.activePage-1)},rb.nextPage=function(){rb.activatePage(Ib.activePage+1)},rb.slideBy=function(a,b){a&&(Mb?rb[Lb?"toCenter":"toStart"](k((Lb?Ib.centerItem:Ib.firstItem)+qb.scrollBy*a,0,Hb.length)):K(xb.dest+a,b))},rb.slideTo=function(a,b){K(a,b)},rb.toStart=function(a,b){P("start",a,b)},rb.toEnd=function(a,b){P("end",a,b)},rb.toCenter=function(a,b){P("center",a,b)},rb.getIndex=Q,rb.activate=function(a,b){var c=S(a);qb.smart&&c!==!1&&(Lb?rb.toCenter(c,b):c>=Ib.lastItem?rb.toStart(c,b):c<=Ib.firstItem?rb.toEnd(c,b):Y())},rb.activatePage=function(a,b){i(a)&&K(Fb[k(a,0,Fb.length-1)],b)},rb.resume=function(a){!qb.cycleBy||!qb.cycleInterval||"items"===qb.cycleBy&&!Hb[0]||a<rb.isPaused||(rb.isPaused=0,bc?bc=clearTimeout(bc):nb("resume"),bc=setTimeout(function(){switch(nb("cycle"),qb.cycleBy){case"items":rb.activate(Ib.activeItem>=Hb.length-1?0:Ib.activeItem+1);break;case"pages":rb.activatePage(Ib.activePage>=Fb.length-1?0:Ib.activePage+1)}},qb.cycleInterval))},rb.pause=function(a){a<rb.isPaused||(rb.isPaused=a||100,bc&&(bc=clearTimeout(bc),nb("pause")))},rb.toggle=function(){rb[bc?"pause":"resume"]()},rb.set=function(b,c){a.isPlainObject(b)?a.extend(qb,b):qb.hasOwnProperty(b)&&(qb[b]=c)},rb.add=function(b,c){var d=a(b);Mb?(null==c||!Hb[0]||c>=Hb.length?d.appendTo(ub):Hb.length&&d.insertBefore(Hb[c].el),c<=Ib.activeItem&&(Wb.active=Ib.activeItem+=d.length)):ub.append(d),J()},rb.remove=function(b){if(Mb){var c=R(b);if(c>-1){Gb.eq(c).remove();var d=c===Ib.activeItem;c<Ib.activeItem&&(Wb.active=--Ib.activeItem),J(),d&&(Wb.active=null,rb.activate(Ib.activeItem))}}else a(b).remove(),J()},rb.moveAfter=function(a,b){W(a,b,1)},rb.moveBefore=function(a,b){W(a,b)},rb.on=function(a,b){if("object"===e(a))for(var c in a)a.hasOwnProperty(c)&&rb.on(c,a[c]);else if("function"===e(b))for(var d=a.split(" "),f=0,g=d.length;g>f;f++)Vb[d[f]]=Vb[d[f]]||[],-1===X(d[f],b)&&Vb[d[f]].push(b);else if("array"===e(b))for(var h=0,i=b.length;i>h;h++)rb.on(a,b[h])},rb.one=function(a,b){function c(){b.apply(rb,arguments),rb.off(a,c)}rb.on(a,c)},rb.off=function(a,b){if(b instanceof Array)for(var c=0,d=b.length;d>c;c++)rb.off(a,b[c]);else for(var e=a.split(" "),f=0,g=e.length;g>f;f++)if(Vb[e[f]]=Vb[e[f]]||[],null==b)Vb[e[f]].length=0;else{var h=X(e[f],b);-1!==h&&Vb[e[f]].splice(h,1)}},rb.destroy=function(){return t.add(Nb).add(zb).add(yb).add(Db).add(Pb).add(Qb).add(Rb).add(Sb).add(Tb).add(Ub).unbind("."+q),Rb.add(Sb).add(Tb).add(Ub).removeClass(qb.disabledClass),Gb&&Gb.eq(Ib.activeItem).removeClass(qb.activeClass),Db.empty(),sb||(tb.unbind("."+q),ub.add(zb).css(l||(qb.horizontal?"left":"top"),l?"none":0),a.removeData(b,q)),Hb.length=Fb.length=0,Wb={},rb.initialized=0,rb},rb.init=function(){if(!rb.initialized){rb.on(p);var a=zb;return sb||(a=a.add(ub),tb.css("overflow","hidden"),l||"static"!==tb.css("position")||tb.css("position","relative")),l?m&&a.css(l,m):("static"===yb.css("position")&&yb.css("position","relative"),a.css({position:"absolute"})),qb.forward&&Pb.on(z,fb),qb.backward&&Qb.on(z,fb),qb.prev&&Rb.on(y,fb),qb.next&&Sb.on(y,fb),qb.prevPage&&Tb.on(y,fb),qb.nextPage&&Ub.on(y,fb),Nb.on(x,hb),yb[0]&&yb.on(y,ib),Mb&&qb.activateOn&&tb.on(qb.activateOn+"."+q,"*",kb),Db[0]&&qb.activatePageOn&&Db.on(qb.activatePageOn+"."+q,"*",lb),Ob.on(u,{source:"slidee"},ab),zb&&zb.on(u,{source:"handle"},ab),t.bind("keydown."+q,jb),sb||(tb.on("mouseenter."+q+" mouseleave."+q,mb),tb.on("scroll."+q,h)),J(),qb.cycleBy&&!sb&&rb[qb.startPaused?"pause":"resume"](),rb.initialized=1,rb}}}function e(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof a}function f(a,b){a.preventDefault(),b&&a.stopPropagation()}function g(b){f(b,1),a(this).off(b.type,g)}function h(){this.scrollLeft=0,this.scrollTop=0}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a,b){return 0|F(String(a.css(b)).replace(/[^\-0-9.]/g,""))}function k(a,b,c){return b>a?b:a>c?c:a}var l,m,n,o="sly",p="Sly",q=o,r=b.cancelAnimationFrame||b.cancelRequestAnimationFrame,s=b.requestAnimationFrame,t=a(document),u="touchstart."+q+" mousedown."+q,v="mousemove."+q+" mouseup."+q,w="touchmove."+q+" touchend."+q,x=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+q,y="click."+q,z="mousedown."+q,A=["INPUT","SELECT","BUTTON","TEXTAREA"],B=[],C=Math.abs,D=Math.sqrt,E=Math.pow,F=Math.round,G=Math.max,H=Math.min,I=0;t.on(x,function(){I=+new Date}),function(a){for(var b=["moz","webkit","o"],c=0,d=0,e=b.length;e>d&&!r;++d)r=a[b[d]+"CancelAnimationFrame"]||a[b[d]+"CancelRequestAnimationFrame"],s=r&&a[b[d]+"RequestAnimationFrame"];r||(s=function(b){var d=+new Date,e=G(0,16-(d-c));return c=d+e,a.setTimeout(function(){b(d+e)},e)},r=function(a){clearTimeout(a)})}(window),function(){function a(a){for(var d=0,e=b.length;e>d;d++){var f=b[d]?b[d]+a.charAt(0).toUpperCase()+a.slice(1):a;if(null!=c.style[f])return f}}var b=["","webkit","moz","ms","o"],c=document.createElement("div");l=a("transform"),m=a("perspective")?"translateZ(0) ":""}(),b[p]=d,a.fn[o]=function(b,c){var f,g;return a.isPlainObject(b)||(("string"===e(b)||b===!1)&&(f=b===!1?"destroy":b,g=Array.prototype.slice.call(arguments,1)),b={}),this.each(function(e,h){var i=a.data(h,q);i||f?i&&f&&i[f]&&i[f].apply(i,g):i=a.data(h,q,new d(h,b,c).init())})},d.defaults={horizontal:0,itemNav:null,itemSelector:null,smart:0,activateOn:null,activateMiddle:0,scrollSource:null,scrollBy:0,scrollHijack:300,dragSource:null,mouseDragging:0,touchDragging:0,releaseSwing:0,swingSpeed:.2,elasticBounds:0,interactive:null,scrollBar:null,dragHandle:0,dynamicHandle:0,minHandleSize:50,clickBar:0,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(a){return"<li>"+(a+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:0,startPaused:0,moveBy:300,speed:0,easing:"swing",startAt:0,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window);

/*
 * Swiper 2.7.0
 * Mobile touch slider and framework with hardware accelerated transitions
 *
 * http://www.idangero.us/sliders/swiper/
 *
 * Copyright 2010-2014, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under GPL & MIT
 *
 * Released on: August 30, 2014
*/
//var Swiper=function(a,b){"use strict";function c(a,b){return document.querySelectorAll?(b||document).querySelectorAll(a):jQuery(a,b)}function d(a){return"[object Array]"===Object.prototype.toString.apply(a)?!0:!1}function e(){var a=F-I;return b.freeMode&&(a=F-I),b.slidesPerView>C.slides.length&&!b.centeredSlides&&(a=0),0>a&&(a=0),a}function f(){function a(a){var c=new Image;c.onload=function(){"undefined"!=typeof C&&null!==C&&(void 0!==C.imagesLoaded&&C.imagesLoaded++,C.imagesLoaded===C.imagesToLoad.length&&(C.reInit(),b.onImagesReady&&C.fireCallback(b.onImagesReady,C)))},c.src=a}var d=C.h.addEventListener,e="wrapper"===b.eventTarget?C.wrapper:C.container;if(C.browser.ie10||C.browser.ie11?(d(e,C.touchEvents.touchStart,p),d(document,C.touchEvents.touchMove,q),d(document,C.touchEvents.touchEnd,r)):(C.support.touch&&(d(e,"touchstart",p),d(e,"touchmove",q),d(e,"touchend",r)),b.simulateTouch&&(d(e,"mousedown",p),d(document,"mousemove",q),d(document,"mouseup",r))),b.autoResize&&d(window,"resize",C.resizeFix),g(),C._wheelEvent=!1,b.mousewheelControl){if(void 0!==document.onmousewheel&&(C._wheelEvent="mousewheel"),!C._wheelEvent)try{new WheelEvent("wheel"),C._wheelEvent="wheel"}catch(f){}C._wheelEvent||(C._wheelEvent="DOMMouseScroll"),C._wheelEvent&&d(C.container,C._wheelEvent,j)}if(b.keyboardControl&&d(document,"keydown",i),b.updateOnImagesReady){C.imagesToLoad=c("img",C.container);for(var h=0;h<C.imagesToLoad.length;h++)a(C.imagesToLoad[h].getAttribute("src"))}}function g(){var a,d=C.h.addEventListener;if(b.preventLinks){var e=c("a",C.container);for(a=0;a<e.length;a++)d(e[a],"click",n)}if(b.releaseFormElements){var f=c("input, textarea, select",C.container);for(a=0;a<f.length;a++)d(f[a],C.touchEvents.touchStart,o,!0)}if(b.onSlideClick)for(a=0;a<C.slides.length;a++)d(C.slides[a],"click",k);if(b.onSlideTouch)for(a=0;a<C.slides.length;a++)d(C.slides[a],C.touchEvents.touchStart,l)}function h(){var a,d=C.h.removeEventListener;if(b.onSlideClick)for(a=0;a<C.slides.length;a++)d(C.slides[a],"click",k);if(b.onSlideTouch)for(a=0;a<C.slides.length;a++)d(C.slides[a],C.touchEvents.touchStart,l);if(b.releaseFormElements){var e=c("input, textarea, select",C.container);for(a=0;a<e.length;a++)d(e[a],C.touchEvents.touchStart,o,!0)}if(b.preventLinks){var f=c("a",C.container);for(a=0;a<f.length;a++)d(f[a],"click",n)}}function i(a){var b=a.keyCode||a.charCode;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey)){if(37===b||39===b||38===b||40===b){for(var c=!1,d=C.h.getOffset(C.container),e=C.h.windowScroll().left,f=C.h.windowScroll().top,g=C.h.windowWidth(),h=C.h.windowHeight(),i=[[d.left,d.top],[d.left+C.width,d.top],[d.left,d.top+C.height],[d.left+C.width,d.top+C.height]],j=0;j<i.length;j++){var k=i[j];k[0]>=e&&k[0]<=e+g&&k[1]>=f&&k[1]<=f+h&&(c=!0)}if(!c)return}M?((37===b||39===b)&&(a.preventDefault?a.preventDefault():a.returnValue=!1),39===b&&C.swipeNext(),37===b&&C.swipePrev()):((38===b||40===b)&&(a.preventDefault?a.preventDefault():a.returnValue=!1),40===b&&C.swipeNext(),38===b&&C.swipePrev())}}function j(a){var c=C._wheelEvent,d=0;if(a.detail)d=-a.detail;else if("mousewheel"===c)if(b.mousewheelControlForceToAxis)if(M){if(!(Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)))return;d=a.wheelDeltaX}else{if(!(Math.abs(a.wheelDeltaY)>Math.abs(a.wheelDeltaX)))return;d=a.wheelDeltaY}else d=a.wheelDelta;else if("DOMMouseScroll"===c)d=-a.detail;else if("wheel"===c)if(b.mousewheelControlForceToAxis)if(M){if(!(Math.abs(a.deltaX)>Math.abs(a.deltaY)))return;d=-a.deltaX}else{if(!(Math.abs(a.deltaY)>Math.abs(a.deltaX)))return;d=-a.deltaY}else d=Math.abs(a.deltaX)>Math.abs(a.deltaY)?-a.deltaX:-a.deltaY;if(b.freeMode){var f=C.getWrapperTranslate()+d;if(f>0&&(f=0),f<-e()&&(f=-e()),C.setWrapperTransition(0),C.setWrapperTranslate(f),C.updateActiveSlide(f),0===f||f===-e())return}else(new Date).getTime()-U>60&&(0>d?C.swipeNext():C.swipePrev()),U=(new Date).getTime();return b.autoplay&&C.stopAutoplay(!0),a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function k(a){C.allowSlideClick&&(m(a),C.fireCallback(b.onSlideClick,C,a))}function l(a){m(a),C.fireCallback(b.onSlideTouch,C,a)}function m(a){if(a.currentTarget)C.clickedSlide=a.currentTarget;else{var c=a.srcElement;do{if(c.className.indexOf(b.slideClass)>-1)break;c=c.parentNode}while(c);C.clickedSlide=c}C.clickedSlideIndex=C.slides.indexOf(C.clickedSlide),C.clickedSlideLoopIndex=C.clickedSlideIndex-(C.loopedSlides||0)}function n(a){return C.allowLinks?void 0:(a.preventDefault?a.preventDefault():a.returnValue=!1,b.preventLinksPropagation&&"stopPropagation"in a&&a.stopPropagation(),!1)}function o(a){return a.stopPropagation?a.stopPropagation():a.returnValue=!1,!1}function p(a){if(b.preventLinks&&(C.allowLinks=!0),C.isTouched||b.onlyExternal)return!1;var c=a.target||a.srcElement;document.activeElement&&document.activeElement!==c&&document.activeElement.blur();var d="input select textarea".split(" ");if(b.noSwiping&&c&&s(c))return!1;if($=!1,C.isTouched=!0,Z="touchstart"===a.type,!Z&&"which"in a&&3===a.which)return!1;if(!Z||1===a.targetTouches.length){C.callPlugins("onTouchStartBegin"),!Z&&!C.isAndroid&&d.indexOf(c.tagName.toLowerCase())<0&&(a.preventDefault?a.preventDefault():a.returnValue=!1);var e=Z?a.targetTouches[0].pageX:a.pageX||a.clientX,f=Z?a.targetTouches[0].pageY:a.pageY||a.clientY;C.touches.startX=C.touches.currentX=e,C.touches.startY=C.touches.currentY=f,C.touches.start=C.touches.current=M?e:f,C.setWrapperTransition(0),C.positions.start=C.positions.current=C.getWrapperTranslate(),C.setWrapperTranslate(C.positions.start),C.times.start=(new Date).getTime(),H=void 0,b.moveStartThreshold>0&&(W=!1),b.onTouchStart&&C.fireCallback(b.onTouchStart,C,a),C.callPlugins("onTouchStartEnd")}}function q(a){if(C.isTouched&&!b.onlyExternal&&(!Z||"mousemove"!==a.type)){var c=Z?a.targetTouches[0].pageX:a.pageX||a.clientX,d=Z?a.targetTouches[0].pageY:a.pageY||a.clientY;if("undefined"==typeof H&&M&&(H=!!(H||Math.abs(d-C.touches.startY)>Math.abs(c-C.touches.startX))),"undefined"!=typeof H||M||(H=!!(H||Math.abs(d-C.touches.startY)<Math.abs(c-C.touches.startX))),H)return void(C.isTouched=!1);if(M){if(!b.swipeToNext&&c<C.touches.startX||!b.swipeToPrev&&c>C.touches.startX)return}else if(!b.swipeToNext&&d<C.touches.startY||!b.swipeToPrev&&d>C.touches.startY)return;if(a.assignedToSwiper)return void(C.isTouched=!1);if(a.assignedToSwiper=!0,b.preventLinks&&(C.allowLinks=!1),b.onSlideClick&&(C.allowSlideClick=!1),b.autoplay&&C.stopAutoplay(!0),!Z||1===a.touches.length){if(C.isMoved||(C.callPlugins("onTouchMoveStart"),b.loop&&(C.fixLoop(),C.positions.start=C.getWrapperTranslate()),b.onTouchMoveStart&&C.fireCallback(b.onTouchMoveStart,C)),C.isMoved=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,C.touches.current=M?c:d,C.positions.current=(C.touches.current-C.touches.start)*b.touchRatio+C.positions.start,C.positions.current>0&&b.onResistanceBefore&&C.fireCallback(b.onResistanceBefore,C,C.positions.current),C.positions.current<-e()&&b.onResistanceAfter&&C.fireCallback(b.onResistanceAfter,C,Math.abs(C.positions.current+e())),b.resistance&&"100%"!==b.resistance){var f;if(C.positions.current>0&&(f=1-C.positions.current/I/2,C.positions.current=.5>f?I/2:C.positions.current*f),C.positions.current<-e()){var g=(C.touches.current-C.touches.start)*b.touchRatio+(e()+C.positions.start);f=(I+g)/I;var h=C.positions.current-g*(1-f)/2,i=-e()-I/2;C.positions.current=i>h||0>=f?i:h}}if(b.resistance&&"100%"===b.resistance&&(C.positions.current>0&&(!b.freeMode||b.freeModeFluid)&&(C.positions.current=0),C.positions.current<-e()&&(!b.freeMode||b.freeModeFluid)&&(C.positions.current=-e())),!b.followFinger)return;if(b.moveStartThreshold)if(Math.abs(C.touches.current-C.touches.start)>b.moveStartThreshold||W){if(!W)return W=!0,void(C.touches.start=C.touches.current);C.setWrapperTranslate(C.positions.current)}else C.positions.current=C.positions.start;else C.setWrapperTranslate(C.positions.current);return(b.freeMode||b.watchActiveIndex)&&C.updateActiveSlide(C.positions.current),b.grabCursor&&(C.container.style.cursor="move",C.container.style.cursor="grabbing",C.container.style.cursor="-moz-grabbin",C.container.style.cursor="-webkit-grabbing"),X||(X=C.touches.current),Y||(Y=(new Date).getTime()),C.velocity=(C.touches.current-X)/((new Date).getTime()-Y)/2,Math.abs(C.touches.current-X)<2&&(C.velocity=0),X=C.touches.current,Y=(new Date).getTime(),C.callPlugins("onTouchMoveEnd"),b.onTouchMove&&C.fireCallback(b.onTouchMove,C,a),!1}}}function r(a){if(H&&C.swipeReset(),!b.onlyExternal&&C.isTouched){C.isTouched=!1,b.grabCursor&&(C.container.style.cursor="move",C.container.style.cursor="grab",C.container.style.cursor="-moz-grab",C.container.style.cursor="-webkit-grab"),C.positions.current||0===C.positions.current||(C.positions.current=C.positions.start),b.followFinger&&C.setWrapperTranslate(C.positions.current),C.times.end=(new Date).getTime(),C.touches.diff=C.touches.current-C.touches.start,C.touches.abs=Math.abs(C.touches.diff),C.positions.diff=C.positions.current-C.positions.start,C.positions.abs=Math.abs(C.positions.diff);var c=C.positions.diff,d=C.positions.abs,f=C.times.end-C.times.start;5>d&&300>f&&C.allowLinks===!1&&(b.freeMode||0===d||C.swipeReset(),b.preventLinks&&(C.allowLinks=!0),b.onSlideClick&&(C.allowSlideClick=!0)),setTimeout(function(){"undefined"!=typeof C&&null!==C&&(b.preventLinks&&(C.allowLinks=!0),b.onSlideClick&&(C.allowSlideClick=!0))},100);var g=e();if(!C.isMoved&&b.freeMode)return C.isMoved=!1,b.onTouchEnd&&C.fireCallback(b.onTouchEnd,C,a),void C.callPlugins("onTouchEnd");if(!C.isMoved||C.positions.current>0||C.positions.current<-g)return C.swipeReset(),b.onTouchEnd&&C.fireCallback(b.onTouchEnd,C,a),void C.callPlugins("onTouchEnd");if(C.isMoved=!1,b.freeMode){if(b.freeModeFluid){var h,i=1e3*b.momentumRatio,j=C.velocity*i,k=C.positions.current+j,l=!1,m=20*Math.abs(C.velocity)*b.momentumBounceRatio;-g>k&&(b.momentumBounce&&C.support.transitions?(-m>k+g&&(k=-g-m),h=-g,l=!0,$=!0):k=-g),k>0&&(b.momentumBounce&&C.support.transitions?(k>m&&(k=m),h=0,l=!0,$=!0):k=0),0!==C.velocity&&(i=Math.abs((k-C.positions.current)/C.velocity)),C.setWrapperTranslate(k),C.setWrapperTransition(i),b.momentumBounce&&l&&C.wrapperTransitionEnd(function(){$&&(b.onMomentumBounce&&C.fireCallback(b.onMomentumBounce,C),C.callPlugins("onMomentumBounce"),C.setWrapperTranslate(h),C.setWrapperTransition(300))}),C.updateActiveSlide(k)}return(!b.freeModeFluid||f>=300)&&C.updateActiveSlide(C.positions.current),b.onTouchEnd&&C.fireCallback(b.onTouchEnd,C,a),void C.callPlugins("onTouchEnd")}G=0>c?"toNext":"toPrev","toNext"===G&&300>=f&&(30>d||!b.shortSwipes?C.swipeReset():C.swipeNext(!0)),"toPrev"===G&&300>=f&&(30>d||!b.shortSwipes?C.swipeReset():C.swipePrev(!0));var n=0;if("auto"===b.slidesPerView){for(var o,p=Math.abs(C.getWrapperTranslate()),q=0,r=0;r<C.slides.length;r++)if(o=M?C.slides[r].getWidth(!0,b.roundLengths):C.slides[r].getHeight(!0,b.roundLengths),q+=o,q>p){n=o;break}n>I&&(n=I)}else n=E*b.slidesPerView;"toNext"===G&&f>300&&(d>=n*b.longSwipesRatio?C.swipeNext(!0):C.swipeReset()),"toPrev"===G&&f>300&&(d>=n*b.longSwipesRatio?C.swipePrev(!0):C.swipeReset()),b.onTouchEnd&&C.fireCallback(b.onTouchEnd,C,a),C.callPlugins("onTouchEnd")}}function s(a){var c=!1;do a.className.indexOf(b.noSwipingClass)>-1&&(c=!0),a=a.parentElement;while(!c&&a.parentElement&&-1===a.className.indexOf(b.wrapperClass));return!c&&a.className.indexOf(b.wrapperClass)>-1&&a.className.indexOf(b.noSwipingClass)>-1&&(c=!0),c}function t(a,b){var c,d=document.createElement("div");return d.innerHTML=b,c=d.firstChild,c.className+=" "+a,c.outerHTML}function u(a,c,d){function e(){var f=+new Date,l=f-g;h+=i*l/(1e3/60),k="toNext"===j?h>a:a>h,k?(C.setWrapperTranslate(Math.ceil(h)),C._DOMAnimating=!0,window.setTimeout(function(){e()},1e3/60)):(b.onSlideChangeEnd&&("to"===c?d.runCallbacks===!0&&C.fireCallback(b.onSlideChangeEnd,C,j):C.fireCallback(b.onSlideChangeEnd,C,j)),C.setWrapperTranslate(a),C._DOMAnimating=!1)}var f="to"===c&&d.speed>=0?d.speed:b.speed,g=+new Date;if(C.support.transitions||!b.DOMAnimation)C.setWrapperTranslate(a),C.setWrapperTransition(f);else{var h=C.getWrapperTranslate(),i=Math.ceil((a-h)/f*(1e3/60)),j=h>a?"toNext":"toPrev",k="toNext"===j?h>a:a>h;if(C._DOMAnimating)return;e()}C.updateActiveSlide(a),b.onSlideNext&&"next"===c&&C.fireCallback(b.onSlideNext,C,a),b.onSlidePrev&&"prev"===c&&C.fireCallback(b.onSlidePrev,C,a),b.onSlideReset&&"reset"===c&&C.fireCallback(b.onSlideReset,C,a),("next"===c||"prev"===c||"to"===c&&d.runCallbacks===!0)&&v(c)}function v(a){if(C.callPlugins("onSlideChangeStart"),b.onSlideChangeStart)if(b.queueStartCallbacks&&C.support.transitions){if(C._queueStartCallbacks)return;C._queueStartCallbacks=!0,C.fireCallback(b.onSlideChangeStart,C,a),C.wrapperTransitionEnd(function(){C._queueStartCallbacks=!1})}else C.fireCallback(b.onSlideChangeStart,C,a);if(b.onSlideChangeEnd)if(C.support.transitions)if(b.queueEndCallbacks){if(C._queueEndCallbacks)return;C._queueEndCallbacks=!0,C.wrapperTransitionEnd(function(c){C.fireCallback(b.onSlideChangeEnd,c,a)})}else C.wrapperTransitionEnd(function(c){C.fireCallback(b.onSlideChangeEnd,c,a)});else b.DOMAnimation||setTimeout(function(){C.fireCallback(b.onSlideChangeEnd,C,a)},10)}function w(){var a=C.paginationButtons;if(a)for(var b=0;b<a.length;b++)C.h.removeEventListener(a[b],"click",y)}function x(){var a=C.paginationButtons;if(a)for(var b=0;b<a.length;b++)C.h.addEventListener(a[b],"click",y)}function y(a){for(var c,d=a.target||a.srcElement,e=C.paginationButtons,f=0;f<e.length;f++)d===e[f]&&(c=f);b.autoplay&&C.stopAutoplay(!0),C.swipeTo(c)}function z(){_=setTimeout(function(){b.loop?(C.fixLoop(),C.swipeNext(!0)):C.swipeNext(!0)||(b.autoplayStopOnLast?(clearTimeout(_),_=void 0):C.swipeTo(0)),C.wrapperTransitionEnd(function(){"undefined"!=typeof _&&z()})},b.autoplay)}function A(){C.calcSlides(),b.loader.slides.length>0&&0===C.slides.length&&C.loadSlides(),b.loop&&C.createLoop(),C.init(),f(),b.pagination&&C.createPagination(!0),b.loop||b.initialSlide>0?C.swipeTo(b.initialSlide,0,!1):C.updateActiveSlide(0),b.autoplay&&C.startAutoplay(),C.centerIndex=C.activeIndex,b.onSwiperCreated&&C.fireCallback(b.onSwiperCreated,C),C.callPlugins("onSwiperCreated")}if(!document.body.outerHTML&&document.body.__defineGetter__&&HTMLElement){var B=HTMLElement.prototype;B.__defineGetter__&&B.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"===b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof a&&(a.nodeType||0!==c(a).length)){var C=this;C.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},C.positions={start:0,abs:0,diff:0,current:0},C.times={start:0,end:0},C.id=(new Date).getTime(),C.container=a.nodeType?a:c(a)[0],C.isTouched=!1,C.isMoved=!1,C.activeIndex=0,C.centerIndex=0,C.activeLoaderIndex=0,C.activeLoopIndex=0,C.previousIndex=null,C.velocity=0,C.snapGrid=[],C.slidesGrid=[],C.imagesToLoad=[],C.imagesLoaded=0,C.wrapperLeft=0,C.wrapperRight=0,C.wrapperTop=0,C.wrapperBottom=0,C.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>=0;var D,E,F,G,H,I,J={eventTarget:"wrapper",mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:!0,simulateTouch:!0,followFinger:!0,shortSwipes:!0,longSwipesRatio:.5,moveStartThreshold:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,preventLinksPropagation:!1,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,mousewheelControlForceToAxis:!1,useCSS3Transforms:!0,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,loop:!1,loopAdditionalSlides:0,roundLengths:!1,calculateHeight:!1,cssWidthAndHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},swipeToPrev:!0,swipeToNext:!0,slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};b=b||{};for(var K in J)if(K in b&&"object"==typeof b[K])for(var L in J[K])L in b[K]||(b[K][L]=J[K][L]);else K in b||(b[K]=J[K]);C.params=b,b.scrollContainer&&(b.freeMode=!0,b.freeModeFluid=!0),b.loop&&(b.resistance="100%");var M="horizontal"===b.mode,N=["mousedown","mousemove","mouseup"];C.browser.ie10&&(N=["MSPointerDown","MSPointerMove","MSPointerUp"]),C.browser.ie11&&(N=["pointerdown","pointermove","pointerup"]),C.touchEvents={touchStart:C.support.touch||!b.simulateTouch?"touchstart":N[0],touchMove:C.support.touch||!b.simulateTouch?"touchmove":N[1],touchEnd:C.support.touch||!b.simulateTouch?"touchend":N[2]};for(var O=C.container.childNodes.length-1;O>=0;O--)if(C.container.childNodes[O].className)for(var P=C.container.childNodes[O].className.split(/\s+/),Q=0;Q<P.length;Q++)P[Q]===b.wrapperClass&&(D=C.container.childNodes[O]);C.wrapper=D,C._extendSwiperSlide=function(a){return a.append=function(){return b.loop?a.insertAfter(C.slides.length-C.loopedSlides):(C.wrapper.appendChild(a),C.reInit()),a},a.prepend=function(){return b.loop?(C.wrapper.insertBefore(a,C.slides[C.loopedSlides]),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):C.wrapper.insertBefore(a,C.wrapper.firstChild),C.reInit(),a},a.insertAfter=function(c){if("undefined"==typeof c)return!1;var d;return b.loop?(d=C.slides[c+1+C.loopedSlides],d?C.wrapper.insertBefore(a,d):C.wrapper.appendChild(a),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):(d=C.slides[c+1],C.wrapper.insertBefore(a,d)),C.reInit(),a},a.clone=function(){return C._extendSwiperSlide(a.cloneNode(!0))},a.remove=function(){C.wrapper.removeChild(a),C.reInit()},a.html=function(b){return"undefined"==typeof b?a.innerHTML:(a.innerHTML=b,a)},a.index=function(){for(var b,c=C.slides.length-1;c>=0;c--)a===C.slides[c]&&(b=c);return b},a.isActive=function(){return a.index()===C.activeIndex?!0:!1},a.swiperSlideDataStorage||(a.swiperSlideDataStorage={}),a.getData=function(b){return a.swiperSlideDataStorage[b]},a.setData=function(b,c){return a.swiperSlideDataStorage[b]=c,a},a.data=function(b,c){return"undefined"==typeof c?a.getAttribute("data-"+b):(a.setAttribute("data-"+b,c),a)},a.getWidth=function(b,c){return C.h.getWidth(a,b,c)},a.getHeight=function(b,c){return C.h.getHeight(a,b,c)},a.getOffset=function(){return C.h.getOffset(a)},a},C.calcSlides=function(a){var c=C.slides?C.slides.length:!1;C.slides=[],C.displaySlides=[];for(var d=0;d<C.wrapper.childNodes.length;d++)if(C.wrapper.childNodes[d].className)for(var e=C.wrapper.childNodes[d].className,f=e.split(/\s+/),i=0;i<f.length;i++)f[i]===b.slideClass&&C.slides.push(C.wrapper.childNodes[d]);for(d=C.slides.length-1;d>=0;d--)C._extendSwiperSlide(C.slides[d]);c!==!1&&(c!==C.slides.length||a)&&(h(),g(),C.updateActiveSlide(),C.params.pagination&&C.createPagination(),C.callPlugins("numberOfSlidesChanged"))},C.createSlide=function(a,c,d){c=c||C.params.slideClass,d=d||b.slideElement;var e=document.createElement(d);return e.innerHTML=a||"",e.className=c,C._extendSwiperSlide(e)},C.appendSlide=function(a,b,c){return a?a.nodeType?C._extendSwiperSlide(a).append():C.createSlide(a,b,c).append():void 0},C.prependSlide=function(a,b,c){return a?a.nodeType?C._extendSwiperSlide(a).prepend():C.createSlide(a,b,c).prepend():void 0},C.insertSlideAfter=function(a,b,c,d){return"undefined"==typeof a?!1:b.nodeType?C._extendSwiperSlide(b).insertAfter(a):C.createSlide(b,c,d).insertAfter(a)},C.removeSlide=function(a){if(C.slides[a]){if(b.loop){if(!C.slides[a+C.loopedSlides])return!1;C.slides[a+C.loopedSlides].remove(),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()}else C.slides[a].remove();return!0}return!1},C.removeLastSlide=function(){return C.slides.length>0?(b.loop?(C.slides[C.slides.length-1-C.loopedSlides].remove(),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):C.slides[C.slides.length-1].remove(),!0):!1},C.removeAllSlides=function(){for(var a=C.slides.length-1;a>=0;a--)C.slides[a].remove()},C.getSlide=function(a){return C.slides[a]},C.getLastSlide=function(){return C.slides[C.slides.length-1]},C.getFirstSlide=function(){return C.slides[0]},C.activeSlide=function(){return C.slides[C.activeIndex]},C.fireCallback=function(){var a=arguments[0];if("[object Array]"===Object.prototype.toString.call(a))for(var c=0;c<a.length;c++)"function"==typeof a[c]&&a[c](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);else"[object String]"===Object.prototype.toString.call(a)?b["on"+a]&&C.fireCallback(b["on"+a],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):a(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},C.addCallback=function(a,b){var c,e=this;return e.params["on"+a]?d(this.params["on"+a])?this.params["on"+a].push(b):"function"==typeof this.params["on"+a]?(c=this.params["on"+a],this.params["on"+a]=[],this.params["on"+a].push(c),this.params["on"+a].push(b)):void 0:(this.params["on"+a]=[],this.params["on"+a].push(b))},C.removeCallbacks=function(a){C.params["on"+a]&&(C.params["on"+a]=null)};var R=[];for(var S in C.plugins)if(b[S]){var T=C.plugins[S](C,b[S]);T&&R.push(T)}C.callPlugins=function(a,b){b||(b={});for(var c=0;c<R.length;c++)a in R[c]&&R[c][a](b)},!C.browser.ie10&&!C.browser.ie11||b.onlyExternal||C.wrapper.classList.add("swiper-wp8-"+(M?"horizontal":"vertical")),b.freeMode&&(C.container.className+=" swiper-free-mode"),C.initialized=!1,C.init=function(a,c){var d=C.h.getWidth(C.container,!1,b.roundLengths),e=C.h.getHeight(C.container,!1,b.roundLengths);if(d!==C.width||e!==C.height||a){C.width=d,C.height=e;var f,g,h,i,j,k,l;I=M?d:e;var m=C.wrapper;if(a&&C.calcSlides(c),"auto"===b.slidesPerView){var n=0,o=0;b.slidesOffset>0&&(m.style.paddingLeft="",m.style.paddingRight="",m.style.paddingTop="",m.style.paddingBottom=""),m.style.width="",m.style.height="",b.offsetPxBefore>0&&(M?C.wrapperLeft=b.offsetPxBefore:C.wrapperTop=b.offsetPxBefore),b.offsetPxAfter>0&&(M?C.wrapperRight=b.offsetPxAfter:C.wrapperBottom=b.offsetPxAfter),b.centeredSlides&&(M?(C.wrapperLeft=(I-this.slides[0].getWidth(!0,b.roundLengths))/2,C.wrapperRight=(I-C.slides[C.slides.length-1].getWidth(!0,b.roundLengths))/2):(C.wrapperTop=(I-C.slides[0].getHeight(!0,b.roundLengths))/2,C.wrapperBottom=(I-C.slides[C.slides.length-1].getHeight(!0,b.roundLengths))/2)),M?(C.wrapperLeft>=0&&(m.style.paddingLeft=C.wrapperLeft+"px"),C.wrapperRight>=0&&(m.style.paddingRight=C.wrapperRight+"px")):(C.wrapperTop>=0&&(m.style.paddingTop=C.wrapperTop+"px"),C.wrapperBottom>=0&&(m.style.paddingBottom=C.wrapperBottom+"px")),k=0;var p=0;for(C.snapGrid=[],C.slidesGrid=[],h=0,l=0;l<C.slides.length;l++){f=C.slides[l].getWidth(!0,b.roundLengths),g=C.slides[l].getHeight(!0,b.roundLengths),b.calculateHeight&&(h=Math.max(h,g));var q=M?f:g;if(b.centeredSlides){var r=l===C.slides.length-1?0:C.slides[l+1].getWidth(!0,b.roundLengths),s=l===C.slides.length-1?0:C.slides[l+1].getHeight(!0,b.roundLengths),t=M?r:s;if(q>I){if(b.slidesPerViewFit)C.snapGrid.push(k+C.wrapperLeft),C.snapGrid.push(k+q-I+C.wrapperLeft);else for(var u=0;u<=Math.floor(q/(I+C.wrapperLeft));u++)C.snapGrid.push(0===u?k+C.wrapperLeft:k+C.wrapperLeft+I*u);C.slidesGrid.push(k+C.wrapperLeft)}else C.snapGrid.push(p),C.slidesGrid.push(p);p+=q/2+t/2}else{if(q>I)if(b.slidesPerViewFit)C.snapGrid.push(k),C.snapGrid.push(k+q-I);else if(0!==I)for(var v=0;v<=Math.floor(q/I);v++)C.snapGrid.push(k+I*v);else C.snapGrid.push(k);else C.snapGrid.push(k);C.slidesGrid.push(k)}k+=q,n+=f,o+=g}b.calculateHeight&&(C.height=h),M?(F=n+C.wrapperRight+C.wrapperLeft,m.style.width=n+"px",m.style.height=C.height+"px"):(F=o+C.wrapperTop+C.wrapperBottom,m.style.width=C.width+"px",m.style.height=o+"px")}else if(b.scrollContainer)m.style.width="",m.style.height="",i=C.slides[0].getWidth(!0,b.roundLengths),j=C.slides[0].getHeight(!0,b.roundLengths),F=M?i:j,m.style.width=i+"px",m.style.height=j+"px",E=M?i:j;else{if(b.calculateHeight){for(h=0,j=0,M||(C.container.style.height=""),m.style.height="",l=0;l<C.slides.length;l++)C.slides[l].style.height="",h=Math.max(C.slides[l].getHeight(!0),h),M||(j+=C.slides[l].getHeight(!0));g=h,C.height=g,M?j=g:(I=g,C.container.style.height=I+"px")}else g=M?C.height:C.height/b.slidesPerView,b.roundLengths&&(g=Math.ceil(g)),j=M?C.height:C.slides.length*g;for(f=M?C.width/b.slidesPerView:C.width,b.roundLengths&&(f=Math.ceil(f)),i=M?C.slides.length*f:C.width,E=M?f:g,b.offsetSlidesBefore>0&&(M?C.wrapperLeft=E*b.offsetSlidesBefore:C.wrapperTop=E*b.offsetSlidesBefore),b.offsetSlidesAfter>0&&(M?C.wrapperRight=E*b.offsetSlidesAfter:C.wrapperBottom=E*b.offsetSlidesAfter),b.offsetPxBefore>0&&(M?C.wrapperLeft=b.offsetPxBefore:C.wrapperTop=b.offsetPxBefore),b.offsetPxAfter>0&&(M?C.wrapperRight=b.offsetPxAfter:C.wrapperBottom=b.offsetPxAfter),b.centeredSlides&&(M?(C.wrapperLeft=(I-E)/2,C.wrapperRight=(I-E)/2):(C.wrapperTop=(I-E)/2,C.wrapperBottom=(I-E)/2)),M?(C.wrapperLeft>0&&(m.style.paddingLeft=C.wrapperLeft+"px"),C.wrapperRight>0&&(m.style.paddingRight=C.wrapperRight+"px")):(C.wrapperTop>0&&(m.style.paddingTop=C.wrapperTop+"px"),C.wrapperBottom>0&&(m.style.paddingBottom=C.wrapperBottom+"px")),F=M?i+C.wrapperRight+C.wrapperLeft:j+C.wrapperTop+C.wrapperBottom,parseFloat(i)>0&&(!b.cssWidthAndHeight||"height"===b.cssWidthAndHeight)&&(m.style.width=i+"px"),parseFloat(j)>0&&(!b.cssWidthAndHeight||"width"===b.cssWidthAndHeight)&&(m.style.height=j+"px"),k=0,C.snapGrid=[],C.slidesGrid=[],l=0;l<C.slides.length;l++)C.snapGrid.push(k),C.slidesGrid.push(k),k+=E,parseFloat(f)>0&&(!b.cssWidthAndHeight||"height"===b.cssWidthAndHeight)&&(C.slides[l].style.width=f+"px"),parseFloat(g)>0&&(!b.cssWidthAndHeight||"width"===b.cssWidthAndHeight)&&(C.slides[l].style.height=g+"px")}C.initialized?(C.callPlugins("onInit"),b.onInit&&C.fireCallback(b.onInit,C)):(C.callPlugins("onFirstInit"),b.onFirstInit&&C.fireCallback(b.onFirstInit,C)),C.initialized=!0}},C.reInit=function(a){C.init(!0,a)},C.resizeFix=function(a){C.callPlugins("beforeResizeFix"),C.init(b.resizeReInit||a),b.freeMode?C.getWrapperTranslate()<-e()&&(C.setWrapperTransition(0),C.setWrapperTranslate(-e())):(C.swipeTo(b.loop?C.activeLoopIndex:C.activeIndex,0,!1),b.autoplay&&(C.support.transitions&&"undefined"!=typeof _?"undefined"!=typeof _&&(clearTimeout(_),_=void 0,C.startAutoplay()):"undefined"!=typeof ab&&(clearInterval(ab),ab=void 0,C.startAutoplay()))),C.callPlugins("afterResizeFix")},C.destroy=function(){var a=C.h.removeEventListener,c="wrapper"===b.eventTarget?C.wrapper:C.container;C.browser.ie10||C.browser.ie11?(a(c,C.touchEvents.touchStart,p),a(document,C.touchEvents.touchMove,q),a(document,C.touchEvents.touchEnd,r)):(C.support.touch&&(a(c,"touchstart",p),a(c,"touchmove",q),a(c,"touchend",r)),b.simulateTouch&&(a(c,"mousedown",p),a(document,"mousemove",q),a(document,"mouseup",r))),b.autoResize&&a(window,"resize",C.resizeFix),h(),b.paginationClickable&&w(),b.mousewheelControl&&C._wheelEvent&&a(C.container,C._wheelEvent,j),b.keyboardControl&&a(document,"keydown",i),b.autoplay&&C.stopAutoplay(),C.callPlugins("onDestroy"),C=null},C.disableKeyboardControl=function(){b.keyboardControl=!1,C.h.removeEventListener(document,"keydown",i)},C.enableKeyboardControl=function(){b.keyboardControl=!0,C.h.addEventListener(document,"keydown",i)};var U=(new Date).getTime();if(C.disableMousewheelControl=function(){return C._wheelEvent?(b.mousewheelControl=!1,C.h.removeEventListener(C.container,C._wheelEvent,j),!0):!1},C.enableMousewheelControl=function(){return C._wheelEvent?(b.mousewheelControl=!0,C.h.addEventListener(C.container,C._wheelEvent,j),!0):!1},b.grabCursor){var V=C.container.style;V.cursor="move",V.cursor="grab",V.cursor="-moz-grab",V.cursor="-webkit-grab"}C.allowSlideClick=!0,C.allowLinks=!0;var W,X,Y,Z=!1,$=!0;C.swipeNext=function(a){!a&&b.loop&&C.fixLoop(),!a&&b.autoplay&&C.stopAutoplay(!0),C.callPlugins("onSwipeNext");var c=C.getWrapperTranslate(),d=c;if("auto"===b.slidesPerView){for(var f=0;f<C.snapGrid.length;f++)if(-c>=C.snapGrid[f]&&-c<C.snapGrid[f+1]){d=-C.snapGrid[f+1];break}}else{var g=E*b.slidesPerGroup;d=-(Math.floor(Math.abs(c)/Math.floor(g))*g+g)}return d<-e()&&(d=-e()),d===c?!1:(u(d,"next"),!0)},C.swipePrev=function(a){!a&&b.loop&&C.fixLoop(),!a&&b.autoplay&&C.stopAutoplay(!0),C.callPlugins("onSwipePrev");var c,d=Math.ceil(C.getWrapperTranslate());if("auto"===b.slidesPerView){c=0;for(var e=1;e<C.snapGrid.length;e++){if(-d===C.snapGrid[e]){c=-C.snapGrid[e-1];break}if(-d>C.snapGrid[e]&&-d<C.snapGrid[e+1]){c=-C.snapGrid[e];break}}}else{var f=E*b.slidesPerGroup;c=-(Math.ceil(-d/f)-1)*f}return c>0&&(c=0),c===d?!1:(u(c,"prev"),!0)},C.swipeReset=function(){C.callPlugins("onSwipeReset");{var a,c=C.getWrapperTranslate(),d=E*b.slidesPerGroup;-e()}if("auto"===b.slidesPerView){a=0;for(var f=0;f<C.snapGrid.length;f++){if(-c===C.snapGrid[f])return;if(-c>=C.snapGrid[f]&&-c<C.snapGrid[f+1]){a=C.positions.diff>0?-C.snapGrid[f+1]:-C.snapGrid[f];break}}-c>=C.snapGrid[C.snapGrid.length-1]&&(a=-C.snapGrid[C.snapGrid.length-1]),c<=-e()&&(a=-e())}else a=0>c?Math.round(c/d)*d:0,c<=-e()&&(a=-e());return b.scrollContainer&&(a=0>c?c:0),a<-e()&&(a=-e()),b.scrollContainer&&I>E&&(a=0),a===c?!1:(u(a,"reset"),!0)},C.swipeTo=function(a,c,d){a=parseInt(a,10),C.callPlugins("onSwipeTo",{index:a,speed:c}),b.loop&&(a+=C.loopedSlides);var f=C.getWrapperTranslate();if(!(a>C.slides.length-1||0>a)){var g;return g="auto"===b.slidesPerView?-C.slidesGrid[a]:-a*E,g<-e()&&(g=-e()),g===f?!1:(d=d===!1?!1:!0,u(g,"to",{index:a,speed:c,runCallbacks:d}),!0)}},C._queueStartCallbacks=!1,C._queueEndCallbacks=!1,C.updateActiveSlide=function(a){if(C.initialized&&0!==C.slides.length){C.previousIndex=C.activeIndex,"undefined"==typeof a&&(a=C.getWrapperTranslate()),a>0&&(a=0);var c;if("auto"===b.slidesPerView){if(C.activeIndex=C.slidesGrid.indexOf(-a),C.activeIndex<0){for(c=0;c<C.slidesGrid.length-1&&!(-a>C.slidesGrid[c]&&-a<C.slidesGrid[c+1]);c++);var d=Math.abs(C.slidesGrid[c]+a),e=Math.abs(C.slidesGrid[c+1]+a);C.activeIndex=e>=d?c:c+1}}else C.activeIndex=Math[b.visibilityFullFit?"ceil":"round"](-a/E);if(C.activeIndex===C.slides.length&&(C.activeIndex=C.slides.length-1),C.activeIndex<0&&(C.activeIndex=0),C.slides[C.activeIndex]){if(C.calcVisibleSlides(a),C.support.classList){var f;for(c=0;c<C.slides.length;c++)f=C.slides[c],f.classList.remove(b.slideActiveClass),C.visibleSlides.indexOf(f)>=0?f.classList.add(b.slideVisibleClass):f.classList.remove(b.slideVisibleClass);C.slides[C.activeIndex].classList.add(b.slideActiveClass)}else{var g=new RegExp("\\s*"+b.slideActiveClass),h=new RegExp("\\s*"+b.slideVisibleClass);for(c=0;c<C.slides.length;c++)C.slides[c].className=C.slides[c].className.replace(g,"").replace(h,""),C.visibleSlides.indexOf(C.slides[c])>=0&&(C.slides[c].className+=" "+b.slideVisibleClass);C.slides[C.activeIndex].className+=" "+b.slideActiveClass}if(b.loop){var i=C.loopedSlides;C.activeLoopIndex=C.activeIndex-i,C.activeLoopIndex>=C.slides.length-2*i&&(C.activeLoopIndex=C.slides.length-2*i-C.activeLoopIndex),C.activeLoopIndex<0&&(C.activeLoopIndex=C.slides.length-2*i+C.activeLoopIndex),C.activeLoopIndex<0&&(C.activeLoopIndex=0)
//}else C.activeLoopIndex=C.activeIndex;b.pagination&&C.updatePagination(a)}}},C.createPagination=function(a){if(b.paginationClickable&&C.paginationButtons&&w(),C.paginationContainer=b.pagination.nodeType?b.pagination:c(b.pagination)[0],b.createPagination){var d="",e=C.slides.length,f=e;b.loop&&(f-=2*C.loopedSlides);for(var g=0;f>g;g++)d+="<"+b.paginationElement+' class="'+b.paginationElementClass+'"></'+b.paginationElement+">";C.paginationContainer.innerHTML=d}C.paginationButtons=c("."+b.paginationElementClass,C.paginationContainer),a||C.updatePagination(),C.callPlugins("onCreatePagination"),b.paginationClickable&&x()},C.updatePagination=function(a){if(b.pagination&&!(C.slides.length<1)){var d=c("."+b.paginationActiveClass,C.paginationContainer);if(d){var e=C.paginationButtons;if(0!==e.length){for(var f=0;f<e.length;f++)e[f].className=b.paginationElementClass;var g=b.loop?C.loopedSlides:0;if(b.paginationAsRange){C.visibleSlides||C.calcVisibleSlides(a);var h,i=[];for(h=0;h<C.visibleSlides.length;h++){var j=C.slides.indexOf(C.visibleSlides[h])-g;b.loop&&0>j&&(j=C.slides.length-2*C.loopedSlides+j),b.loop&&j>=C.slides.length-2*C.loopedSlides&&(j=C.slides.length-2*C.loopedSlides-j,j=Math.abs(j)),i.push(j)}for(h=0;h<i.length;h++)e[i[h]]&&(e[i[h]].className+=" "+b.paginationVisibleClass);b.loop?void 0!==e[C.activeLoopIndex]&&(e[C.activeLoopIndex].className+=" "+b.paginationActiveClass):e[C.activeIndex].className+=" "+b.paginationActiveClass}else b.loop?e[C.activeLoopIndex]&&(e[C.activeLoopIndex].className+=" "+b.paginationActiveClass+" "+b.paginationVisibleClass):e[C.activeIndex].className+=" "+b.paginationActiveClass+" "+b.paginationVisibleClass}}}},C.calcVisibleSlides=function(a){var c=[],d=0,e=0,f=0;M&&C.wrapperLeft>0&&(a+=C.wrapperLeft),!M&&C.wrapperTop>0&&(a+=C.wrapperTop);for(var g=0;g<C.slides.length;g++){d+=e,e="auto"===b.slidesPerView?M?C.h.getWidth(C.slides[g],!0,b.roundLengths):C.h.getHeight(C.slides[g],!0,b.roundLengths):E,f=d+e;var h=!1;b.visibilityFullFit?(d>=-a&&-a+I>=f&&(h=!0),-a>=d&&f>=-a+I&&(h=!0)):(f>-a&&-a+I>=f&&(h=!0),d>=-a&&-a+I>d&&(h=!0),-a>d&&f>-a+I&&(h=!0)),h&&c.push(C.slides[g])}0===c.length&&(c=[C.slides[C.activeIndex]]),C.visibleSlides=c};var _,ab;C.startAutoplay=function(){if(C.support.transitions){if("undefined"!=typeof _)return!1;if(!b.autoplay)return;C.callPlugins("onAutoplayStart"),b.onAutoplayStart&&C.fireCallback(b.onAutoplayStart,C),z()}else{if("undefined"!=typeof ab)return!1;if(!b.autoplay)return;C.callPlugins("onAutoplayStart"),b.onAutoplayStart&&C.fireCallback(b.onAutoplayStart,C),ab=setInterval(function(){b.loop?(C.fixLoop(),C.swipeNext(!0)):C.swipeNext(!0)||(b.autoplayStopOnLast?(clearInterval(ab),ab=void 0):C.swipeTo(0))},b.autoplay)}},C.stopAutoplay=function(a){if(C.support.transitions){if(!_)return;_&&clearTimeout(_),_=void 0,a&&!b.autoplayDisableOnInteraction&&C.wrapperTransitionEnd(function(){z()}),C.callPlugins("onAutoplayStop"),b.onAutoplayStop&&C.fireCallback(b.onAutoplayStop,C)}else ab&&clearInterval(ab),ab=void 0,C.callPlugins("onAutoplayStop"),b.onAutoplayStop&&C.fireCallback(b.onAutoplayStop,C)},C.loopCreated=!1,C.removeLoopedSlides=function(){if(C.loopCreated)for(var a=0;a<C.slides.length;a++)C.slides[a].getData("looped")===!0&&C.wrapper.removeChild(C.slides[a])},C.createLoop=function(){if(0!==C.slides.length){C.loopedSlides="auto"===b.slidesPerView?b.loopedSlides||1:b.slidesPerView+b.loopAdditionalSlides,C.loopedSlides>C.slides.length&&(C.loopedSlides=C.slides.length);var a,c="",d="",e="",f=C.slides.length,g=Math.floor(C.loopedSlides/f),h=C.loopedSlides%f;for(a=0;g*f>a;a++){var i=a;if(a>=f){var j=Math.floor(a/f);i=a-f*j}e+=C.slides[i].outerHTML}for(a=0;h>a;a++)d+=t(b.slideDuplicateClass,C.slides[a].outerHTML);for(a=f-h;f>a;a++)c+=t(b.slideDuplicateClass,C.slides[a].outerHTML);var k=c+e+D.innerHTML+e+d;for(D.innerHTML=k,C.loopCreated=!0,C.calcSlides(),a=0;a<C.slides.length;a++)(a<C.loopedSlides||a>=C.slides.length-C.loopedSlides)&&C.slides[a].setData("looped",!0);C.callPlugins("onCreateLoop")}},C.fixLoop=function(){var a;C.activeIndex<C.loopedSlides?(a=C.slides.length-3*C.loopedSlides+C.activeIndex,C.swipeTo(a,0,!1)):("auto"===b.slidesPerView&&C.activeIndex>=2*C.loopedSlides||C.activeIndex>C.slides.length-2*b.slidesPerView)&&(a=-C.slides.length+C.activeIndex+C.loopedSlides,C.swipeTo(a,0,!1))},C.loadSlides=function(){var a="";C.activeLoaderIndex=0;for(var c=b.loader.slides,d=b.loader.loadAllSlides?c.length:b.slidesPerView*(1+b.loader.surroundGroups),e=0;d>e;e++)a+="outer"===b.loader.slidesHTMLType?c[e]:"<"+b.slideElement+' class="'+b.slideClass+'" data-swiperindex="'+e+'">'+c[e]+"</"+b.slideElement+">";C.wrapper.innerHTML=a,C.calcSlides(!0),b.loader.loadAllSlides||C.wrapperTransitionEnd(C.reloadSlides,!0)},C.reloadSlides=function(){var a=b.loader.slides,c=parseInt(C.activeSlide().data("swiperindex"),10);if(!(0>c||c>a.length-1)){C.activeLoaderIndex=c;var d=Math.max(0,c-b.slidesPerView*b.loader.surroundGroups),e=Math.min(c+b.slidesPerView*(1+b.loader.surroundGroups)-1,a.length-1);if(c>0){var f=-E*(c-d);C.setWrapperTranslate(f),C.setWrapperTransition(0)}var g;if("reload"===b.loader.logic){C.wrapper.innerHTML="";var h="";for(g=d;e>=g;g++)h+="outer"===b.loader.slidesHTMLType?a[g]:"<"+b.slideElement+' class="'+b.slideClass+'" data-swiperindex="'+g+'">'+a[g]+"</"+b.slideElement+">";C.wrapper.innerHTML=h}else{var i=1e3,j=0;for(g=0;g<C.slides.length;g++){var k=C.slides[g].data("swiperindex");d>k||k>e?C.wrapper.removeChild(C.slides[g]):(i=Math.min(k,i),j=Math.max(k,j))}for(g=d;e>=g;g++){var l;i>g&&(l=document.createElement(b.slideElement),l.className=b.slideClass,l.setAttribute("data-swiperindex",g),l.innerHTML=a[g],C.wrapper.insertBefore(l,C.wrapper.firstChild)),g>j&&(l=document.createElement(b.slideElement),l.className=b.slideClass,l.setAttribute("data-swiperindex",g),l.innerHTML=a[g],C.wrapper.appendChild(l))}}C.reInit(!0)}},A()}};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(a,b){"use strict";function c(h){if(h.target===f&&(a(e),e.params.queueEndCallbacks&&(e._queueEndCallbacks=!1),!b))for(d=0;d<g.length;d++)e.h.removeEventListener(f,g[d],c)}var d,e=this,f=e.wrapper,g=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(a)for(d=0;d<g.length;d++)e.h.addEventListener(f,g[d],c)},getWrapperTranslate:function(a){"use strict";var b,c,d,e,f=this.wrapper;return"undefined"==typeof a&&(a="horizontal"===this.params.mode?"x":"y"),this.support.transforms&&this.params.useCSS3Transforms?(d=window.getComputedStyle(f,null),window.WebKitCSSMatrix?e=new WebKitCSSMatrix("none"===d.webkitTransform?"":d.webkitTransform):(e=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),b=e.toString().split(",")),"x"===a&&(c=window.WebKitCSSMatrix?e.m41:parseFloat(16===b.length?b[12]:b[4])),"y"===a&&(c=window.WebKitCSSMatrix?e.m42:parseFloat(16===b.length?b[13]:b[5]))):("x"===a&&(c=parseFloat(f.style.left,10)||0),"y"===a&&(c=parseFloat(f.style.top,10)||0)),c||0},setWrapperTranslate:function(a,b,c){"use strict";var d,e=this.wrapper.style,f={x:0,y:0,z:0};3===arguments.length?(f.x=a,f.y=b,f.z=c):("undefined"==typeof b&&(b="horizontal"===this.params.mode?"x":"y"),f[b]=a),this.support.transforms&&this.params.useCSS3Transforms?(d=this.support.transforms3d?"translate3d("+f.x+"px, "+f.y+"px, "+f.z+"px)":"translate("+f.x+"px, "+f.y+"px)",e.webkitTransform=e.MsTransform=e.msTransform=e.MozTransform=e.OTransform=e.transform=d):(e.left=f.x+"px",e.top=f.y+"px"),this.callPlugins("onSetWrapperTransform",f),this.params.onSetWrapperTransform&&this.fireCallback(this.params.onSetWrapperTransform,this,f)},setWrapperTransition:function(a){"use strict";var b=this.wrapper.style;b.webkitTransitionDuration=b.MsTransitionDuration=b.msTransitionDuration=b.MozTransitionDuration=b.OTransitionDuration=b.transitionDuration=a/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:a}),this.params.onSetWrapperTransition&&this.fireCallback(this.params.onSetWrapperTransition,this,a)},h:{getWidth:function(a,b,c){"use strict";var d=window.getComputedStyle(a,null).getPropertyValue("width"),e=parseFloat(d);return(isNaN(e)||d.indexOf("%")>0||0>e)&&(e=a.offsetWidth-parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-right"))),b&&(e+=parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-right"))),c?Math.ceil(e):e},getHeight:function(a,b,c){"use strict";if(b)return a.offsetHeight;var d=window.getComputedStyle(a,null).getPropertyValue("height"),e=parseFloat(d);return(isNaN(e)||d.indexOf("%")>0||0>e)&&(e=a.offsetHeight-parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-bottom"))),b&&(e+=parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(a,null).getPropertyValue("padding-bottom"))),c?Math.ceil(e):e},getOffset:function(a){"use strict";var b=a.getBoundingClientRect(),c=document.body,d=a.clientTop||c.clientTop||0,e=a.clientLeft||c.clientLeft||0,f=window.pageYOffset||a.scrollTop,g=window.pageXOffset||a.scrollLeft;return document.documentElement&&!window.pageYOffset&&(f=document.documentElement.scrollTop,g=document.documentElement.scrollLeft),{top:b.top+f-d,left:b.left+g-e}},windowWidth:function(){"use strict";return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){"use strict";return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){"use strict";return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(a,b,c,d){"use strict";"undefined"==typeof d&&(d=!1),a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},removeEventListener:function(a,b,c,d){"use strict";"undefined"==typeof d&&(d=!1),a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)}},setTransform:function(a,b){"use strict";var c=a.style;c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=b},setTranslate:function(a,b){"use strict";var c=a.style,d={x:b.x||0,y:b.y||0,z:b.z||0},e=this.support.transforms3d?"translate3d("+d.x+"px,"+d.y+"px,"+d.z+"px)":"translate("+d.x+"px,"+d.y+"px)";c.webkitTransform=c.MsTransform=c.msTransform=c.MozTransform=c.OTransform=c.transform=e,this.support.transforms||(c.left=d.x+"px",c.top=d.y+"px")},setTransition:function(a,b){"use strict";var c=a.style;c.webkitTransitionDuration=c.MsTransitionDuration=c.msTransitionDuration=c.MozTransitionDuration=c.OTransitionDuration=c.transitionDuration=b+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){"use strict";return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){"use strict";var a=document.createElement("div").style;return"webkitPerspective"in a||"MozPerspective"in a||"OPerspective"in a||"MsPerspective"in a||"perspective"in a}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){"use strict";var a=document.createElement("div").style;return"transform"in a||"WebkitTransform"in a||"MozTransform"in a||"msTransform"in a||"MsTransform"in a||"OTransform"in a}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){"use strict";var a=document.createElement("div").style;return"transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"MsTransition"in a||"OTransition"in a}(),classList:function(){"use strict";var a=document.createElement("div");return"classList"in a}()},browser:{ie8:function(){"use strict";var a=-1;if("Microsoft Internet Explorer"===navigator.appName){var b=navigator.userAgent,c=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);null!==c.exec(b)&&(a=parseFloat(RegExp.$1))}return-1!==a&&9>a}(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}},(window.jQuery||window.Zepto)&&!function(a){"use strict";a.fn.swiper=function(b){var c;return this.each(function(d){var e=a(this);if(!e.data("swiper")){var f=new Swiper(e[0],b);d||(c=f),e.data("swiper",f)}}),c}}(window.jQuery||window.Zepto),"undefined"!=typeof module&&(module.exports=Swiper),"function"==typeof define&&define.amd&&define([],function(){"use strict";return Swiper});
/*
 * Swiper Scrollbar 2.4.1
 * Scrollbar plugin for Swiper
 *
 * http://www.idangero.us/sliders/swiper/plugins/scrollbar.php
 *
 * Copyright 2010-2014, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 *
 * Licensed under GPL & MIT
 *
 * Released on: June 27, 2014
*/
//Swiper.prototype.plugins.scrollbar=function(a,b){function c(a){return document.querySelectorAll?document.querySelectorAll(a):jQuery(a)}function d(){u.style.width="",u.style.height="",s?(h=a.h.getWidth(t,!0),b.dragSize&&b.dragSize>0?(l=b.dragSize,n=h-l,p=a.h.getWidth(a.wrapper)+a.wrapperLeft+a.wrapperRight-a.width,k=n/p):(j=a.width/(a.h.getWidth(a.wrapper)+a.wrapperLeft+a.wrapperRight),k=j*(h/a.width),l=h*j),u.style.width=l+"px"):(i=a.h.getHeight(t,!0),b.dragSize&&b.dragSize>0?(m=b.dragSize,o=i-m,q=a.h.getHeight(a.wrapper)+a.wrapperTop+a.wrapperBottom-a.height,k=o/q):(j=a.height/(a.h.getHeight(a.wrapper)+a.wrapperTop+a.wrapperBottom),k=j*(i/a.height),m=i*j),m>i&&(m=i),u.style.height=m+"px"),r.style.display=j>=1?"none":""}var e=b&&b.container;if(e){var f={hide:!0,draggable:!0,snapOnRelease:!1,dragSize:void 0};b=b||{};for(var g in f)g in b||(b[g]=f[g]);if((document.querySelectorAll||window.jQuery)&&(b.container.nodeType||0!==c(b.container).length)){var h,i,j,k,l,m,n,o,p,q,r=b.container.nodeType?b.container:c(b.container)[0],s="horizontal"===a.params.mode,t=r,u=document.createElement("div");u.className="swiper-scrollbar-drag",b.draggable&&(u.className+=" swiper-scrollbar-cursor-drag"),t.appendChild(u),b.hide&&(t.style.opacity=0);var v,w,x,y,z=a.touchEvents;if(b.draggable){var A=!1;v=function(c){A=!0,c.preventDefault?c.preventDefault():c.returnValue=!1,y(c),clearTimeout(C),a.setTransition(t,0),t.style.opacity=1,a.setWrapperTransition(100),a.setTransition(u,100),b.onScrollbarDrag&&b.onScrollbarDrag(a)},w=function(c){A&&(c.preventDefault?c.preventDefault():c.returnValue=!1,y(c),a.setWrapperTransition(0),a.setTransition(t,0),a.setTransition(u,0),b.onScrollbarDrag&&b.onScrollbarDrag(a))},x=function(){A=!1,b.hide&&(clearTimeout(C),C=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3)),b.snapOnRelease&&a.swipeReset()};var B=a.support.touch?t:document;a.h.addEventListener(t,z.touchStart,v,!1),a.h.addEventListener(B,z.touchMove,w,!1),a.h.addEventListener(B,z.touchEnd,x,!1),y=function(b){var c=0,d=0;if(s){var e="touchstart"===b.type||"touchmove"===b.type?b.targetTouches[0].pageX:b.pageX||b.clientX;c=e-a.h.getOffset(t).left-l/2,0>c?c=0:c+l>h&&(c=h-l)}else{var f="touchstart"===b.type||"touchmove"===b.type?b.targetTouches[0].pageY:b.pageY||b.clientY;d=f-a.h.getOffset(t).top-m/2,0>d?d=0:d+m>i&&(d=i-m)}a.setTranslate(u,{x:c,y:d});var g=-c/k,j=-d/k;a.setWrapperTranslate(g,j,0),a.updateActiveSlide(s?g:j)}}var C;return{onFirstInit:function(){d()},onInit:function(){d()},onTouchMoveEnd:function(){b.hide&&(clearTimeout(C),t.style.opacity=1,a.setTransition(t,200))},onTouchEnd:function(){b.hide&&(clearTimeout(C),C=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3))},onSetWrapperTransform:function(c){var d;if(s){var e=c.x*k,f=l;e>0?(d=e,e=0,f=l-d):-e+l>h&&(f=h+e),a.setTranslate(u,{x:-e}),u.style.width=f+"px"}else{var g=c.y*k,j=m;g>0?(d=g,g=0,j=m-d):-g+m>i&&(j=i+g),a.setTranslate(u,{y:-g}),u.style.height=j+"px"}a.params.freeMode&&b.hide&&(clearTimeout(C),t.style.opacity=1,C=setTimeout(function(){t.style.opacity=0,a.setTransition(t,400)},1e3))},onSetWrapperTransition:function(b){a.setTransition(u,b.duration)},onDestroy:function(){var b=a.support.touch?t:document;a.h.removeEventListener(t,z.touchStart,v,!1),a.h.removeEventListener(b,z.touchMove,w,!1),a.h.removeEventListener(b,z.touchEnd,x,!1)}}}}};

/*
I have given the use full access to the bucket gs://tbpawa

See how you get on, if you are uploading many files/folders then best to use the gsutil utility  with perhaps m

Something like

gsutil -h "Cache-Control:public,max-age=259200" cp -m -a public-read -R /images/* gs://tbpawa/


Optimizely

User name: bookpeople.awadigital@gmail.com

Password: testhero1

They're not used to sharing access, so for any experiments that you build, please start the name with AWA_TEST. 

"Product pages for the following products:
Ladybird Read It Yourself Collection - 50 Books
Roald Dahl Collection - 15 Books
Julia Donaldson Story Collection - 10 Books
Songbirds Phonics Collection - 36 Books
Read with Biff, Chip & Kipper (Levels 1-3) Collection - 25 Books
The Early Reader Collection - 30 Books
Ladybird Tales Collection - 24 Books
Wimpy Kid Collection - 7 Books
New Roald Dahl Collection - 15 Books
Best ever fiction collection 10 books
The Scarecrows' Wedding
Guy Martin: My Autobiography
Disney's Frozen: The essential Guide
The 1000 Dot-to-Dot Book: Animals
The Battlefields of the First World War
Recipes from a Normal Mum
Rubber Band Loom Bracelets
The Beekeeper's Daughter

There are two types:
Collections e.g. http://www.thebookpeople.co.uk/webapp/wcs/stores/servlet/qs_product_tbp?productId=484168&storeId=10001&catalogId=10051&langId=100

Single books e.g.:
http://www.thebookpeople.co.uk/webapp/wcs/stores/servlet/qs_product_tbp?productId=502498&storeId=10001&catalogId=10051&langId=100
"

"Thumbnails will be added below the main product image, for inside pages. Clicking on the thumbnails will bring up a ""look inside"" overlay for that tumbnail (very similar to Amazon). The Look inside overlay will allow users to view each thumbnail and also feature an add to basket.

On collections the add to basket will also include a Price-per-book figure. The number of books is always at the end of the product title and the price is always above the add to basket. We will need to calculate the price per book from these two figures (always rounding up to the nearest penny)

Furthermore for collections the list of books contained with the main product copy in the centre of the pages, will include links that open up the same look inside overlay.

There will only be 1 or two pages per book, however as collections can contain up to 50 books, this can can still be a lot of pages. Ideally we don;t want to have to manually add each page, so it would be great if there was a way of simplifying this e.g. Could we save the pages within a specific folder structure and from that structure generate the look inside feature for the relevant pages? That's just an example - I'm very open to your suggestions of how we could make this workable, especially as we may repeat the test with even more books and pages."

"There are two types:
Collections e.g. http://www.thebookpeople.co.uk/webapp/wcs/stores/servlet/qs_product_tbp?productId=484168&storeId=10001&catalogId=10051&langId=100

Single books e.g.:
http://www.thebookpeople.co.uk/webapp/wcs/stores/servlet/qs_product_tbp?productId=502498&storeId=10001&catalogId=10051&langId=100

I'll provide all URL targeting details once we've worked out how the test will work."

*/

// Wrap the experiment code in an IIFE, this creates a local scope and allows us to
// pass in jQuery to use as $. Other globals could be passed in if required.
var exp = (function($) {

// Initialise the experiment object
var exp = {};

// Log the experiment, useful when multiple experiments are running
console.log('Look inside experiment - 0.1');

// Variables
// Object containing variables, generally these would be strings or jQuery objects
exp.vars = {
//    'productId': dataLayer[0]['product_id'],
    'productTitle': $('#product-description-title').html(),
    'buyBlock': $('.priceWrapper').clone(),
    'wishlistLink': $('#add-to-wishlist-link').clone(),
    'colorOrange': '#F8932B',
    'colorBlue': '#45BE9D',
    'imageThumbsTitle': '//cdn.optimizely.com/img/579743489/212f033604254484a602bcb2583bb02d.png',
    'imageMiniArrow': '//cdn.optimizely.com/img/579743489/08007039f0744e0a8cf7f358badafeee.png',
    'imageModalTitle': '//cdn.optimizely.com/img/579743489/6f69bc067a1b40989029c0b9dfbf2799.png',
    'imageZoomNavUp': '//cdn.optimizely.com/img/579743489/96edba11ec5c4bce80f1601243764e06.png',
    'imageZoomNavDown': '//cdn.optimizely.com/img/579743489/f4421c49c82b464fb89185bcbfb9d7dd.png',
    'imageZoomIcon': '//cdn.optimizely.com/img/579743489/56069e92745b4d44854a5454137108b7.png',
    'zoomThumbs': {},
    'modalTemplate': ' \
        <div class="modal fade" id="lookInsideModal" tabindex="-1" role="dialog" aria-labelledby="lookInsideModal" aria-hidden="true"> \
        <div class="modal-dialog"> <div class="modal-content"> \
        <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <p class="see-inside-header">See inside</p> </div> \
        <div class="modal-body"> </div> </div> </div> </div>',
    'productId': $('input[name="productId"]:eq(0)').val(),
    'imagesExtension': '.jpg',
    'imagesBase': 'http://www.awa-digital.com/optimizely/the-book-people/',
    'imagesTypeFolders': {
        'thumbs': '/product-page-thumbnails/',
        'viewerThumbs': '/viewer-thumbnails/',
        'viewerMainSmall': '/main-image-568-wide/',
        'viewerMainLarge': '/main-image-827-wide/',
        'zoomed': '/fullsize-for-zoom/'
    },
    'productName': {
        '439365': 'julia-donaldson'
    },
    'images': {
        'julia-donaldson': {
            '0': [ 'TheGruffalosChild', 'The Gruffalo\'s Child', 'This is an example second heading'  ],
            '1': [ 'WakeUpDoLydiaLou', 'Wake Up Do, Lydia Lou!', '' ],
            '2': [ 'CharlieCooksFavouriteBook', 'Charlie Cook\'s Favourite Book', '' ],
            '3': [ 'FreddieAndtheFairy', 'Freddie and the Fairy', '' ],
            '4': [ 'MonkeyPuzzle', 'Monkey Puzzle', '' ],
            '5': [ 'WiggleAndRoar', 'Wriggle and Roar!', '', true ],
            '6': [ 'TheSnailAndTheWhale', 'The Snail and the Whale', '' ],
            '7': [ 'RoomOnTheBroom', 'Room on the Broom', '' ],
            '8': [ 'GoatGoesToPlaygroup', 'Goat Goes To Playgroup', '', true ],
            '9': [ 'ToddleWaddle', 'Toddle Waddle', '' ]
        }
    }
};

// Styles
// String containing the CSS for the experiment
exp.css = ' \
/* Swiper plugin */ \
.swiper-container{margin:0 auto;position:relative;overflow:hidden;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;-o-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-wrapper{position:relative;width:100%;-webkit-transition-property:-webkit-transform,left,top;-webkit-transition-duration:0s;-webkit-transform:translate3d(0px,0,0);-webkit-transition-timing-function:ease;-moz-transition-property:-moz-transform,left,top;-moz-transition-duration:0s;-moz-transform:translate3d(0px,0,0);-moz-transition-timing-function:ease;-o-transition-property:-o-transform,left,top;-o-transition-duration:0s;-o-transition-timing-function:ease;-o-transform:translate(0px,0);-ms-transition-property:-ms-transform,left,top;-ms-transition-duration:0s;-ms-transform:translate3d(0px,0,0);-ms-transition-timing-function:ease;transition-property:transform,left,top;transition-duration:0s;transform:translate3d(0px,0,0);transition-timing-function:ease;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.swiper-free-mode>.swiper-wrapper{-webkit-transition-timing-function:ease-out;-moz-transition-timing-function:ease-out;-ms-transition-timing-function:ease-out;-o-transition-timing-function:ease-out;transition-timing-function:ease-out;margin:0 auto}.swiper-slide{float:left;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.swiper-wp8-horizontal{-ms-touch-action:pan-y}.swiper-wp8-vertical{-ms-touch-action:pan-x} \
.swiper-container { } \
.swiper-slide {} \
.swiper-slide-active {} \
.swiper-slide-visible {} \
.swiper-pagination-switch {} \
.swiper-active-switch {} \
.swiper-visible-switch {} \
.swiper-scrollbar { border-radius: 10px; -ms-touch-action: none; background: #00f; height:400px; width: 10px; } \
.swiper-scrollbar-drag { height: 10% !important; width: 100%; position: relative; background: #f00; border-radius: 10px; } \
.swiper-scrollbar-cursor-drag { cursor: move; } \
/* Thumbs sidebar */ \
.look-inside-thumbs { margin-bottom: 20px; } \
.look-inside-thumbs--title a { color: '+exp.vars.colorOrange+'; background: url('+exp.vars.imageThumbsTitle+') left no-repeat transparent; \
  line-height: 19px; padding: 0 0 0 25px; font-family: "Open Sans","sans-serif"; font-size: 1.6em; } \
.look-inside-thumbs img { width: 60px; height: 60px; margin-left: 10px; margin-bottom: 10px; } \
.look-inside-thumbs a:hover { opacity: 0.9; } \
.look-inside-thumbs .look-inside-thumbs--first { margin-left: 0; } \
/* Central panel list */ \
.see-inside-hover { display: none; color: '+exp.vars.colorOrange+'; background: url('+exp.vars.imageMiniArrow+') left no-repeat transparent; \
  padding: 0 0 0 15px; font-family: "Open Sans","sans-serif"; font-size: 1.1em; line-height: 13px; } \
#setTitles .setTitle a:hover { color: #08C !important; text-decoration: none !important; } \
#setTitles .setTitle a:hover .see-inside-titlelink { text-decoration: underline !important; } \
#setTitles .setTitle a:hover .see-inside-hover { display: inline; text-decoration: none !important; } \
/* Look inside modal */ \
#lookInsideModal { height: 700px; width: 1207px; margin-left: -603px; display: none; } \
#lookInsideModal .modal-content { position: relative; } \
#lookInsideModal .modal-body { max-height: 900px; overflow: hidden; padding-bottom: 35px; } \
#lookInsideModal .modal-header { padding: 0; border-bottom: 0; } \
#lookInsideModal .modal-header button { z-index: 99; color: '+exp.vars.colorBlue+'; opacity: 1 !important; position: absolute; top: 0; right: 5px; font-size: 2em; } \
#lookInsideModal .modal-header button:hover { opacity: 0.4 !important; } \
.see-inside-header { color: '+exp.vars.colorOrange+'; position: absolute; top: 10px; left: 10px; background: url('+exp.vars.imageModalTitle+') left no-repeat transparent; \
  padding: 0 0 0 27px; line-height: 24px; font-size: 2.2em; font-family: "Open Sans","sans-serif"; } \
.see-inside--header, .see-inside--zoom { width: 831px; float: right; clear: right; position: relative; } \
.see-inside--header { height: 94px; overflow: hidden; position: relative; } \
.see-inside--header h3 { margin-top: 0; width: 620px; font-size: 1.8em; float: left; clear: left; } \
.see-inside--wishlist { position: absolute; bottom: 0; left: 0; } \
.see-inside--header .priceWrapper { float: right; } \
.see-inside--header .priceWrapper #add-to-wishlist-link { display: none; } \
.see-inside--scroller { width: 300px; float: left; margin: 70px 0 0 0; } \
.see-inside--header .priceWrapper .price-string { margin: 0px -2px 0px 0px; padding: 0px; font-size: 21px; font-weight: bold; color: #000; } \
.see-inside--header .priceWrapper .saving, .see-inside--header .priceWrapper .rrp { padding: 0px 5px 0px 0px; margin: 0px;} \
.see-inside--header .add-to-basket-button { position: relative; top: -5px; } \
.see-inside--header .addToBasketForm { margin: 0; } \
.see-inside--zoom { height: 542px; } \
.see-inside--scroller { margin: 50px 0px 0px; height: 652px; overflow: hidden; } \
.see-inside--scroller p { margin: 0; height: 37px; } \
.see-inside--scroller p a { font-size: 1.1em; color: #333; } \
.see-inside--scroller a { text-decoration: none; } \
.see-inside--scroller p a span { font-size: 0.8em; display: block; position: relative; top: -4px; font-style: italic; } \
.see-inside--scroller img { border: 2px solid #fff; width: 260px; height: 163px; border-radius: 3px; } \
.zoom-item { padding: 0 0 20px 0; height: 300px; } \
.see-inside--zoom-container { margin-top: 15px; width: 831px; height: 550px; background: #fff; } \
.see-inside--zoom-container--inner { width: 827px; height: auto; border: 2px solid '+exp.vars.colorOrange+'; cursor: zoom-in; } \
.see-inside--zoom-container img { width: 827px; height: auto; cursor: zoom-in; } \
script + .see-inside--zoom-container { position: absolute; top: 0; left: 0; z-index: -1; } \
.see-inside--zoom-nav-up, .see-inside--zoom-nav-bottom { position: absolute; left: 407px; width: 17px; height: 16px; z-index: 99; } \
.see-inside--zoom-nav-up:hover, .see-inside--zoom-nav-bottom:hover { text-decoration: none; opacity: 0.8; } \
.see-inside--zoom-nav-up { top: -20px; background: url('+exp.vars.imageZoomNavUp+') 0 0 no-repeat transparent; } \
.see-inside--zoom-nav-bottom { bottom: -35px; background: url('+exp.vars.imageZoomNavDown+') 0 0 no-repeat transparent; } \
.see-inside--zoom-icon { z-index: 100; width: 40px; height: 40px; position: absolute; top: 15px; right: 0; border-top: 2px solid '+exp.vars.colorOrange+'; border-right: 2px solid '+exp.vars.colorOrange+'; background: url('+exp.vars.imageZoomIcon+') center no-repeat #F0F8FB; } \
/* */ ';

// Functions
// Object containing functions, some helpful functions are included
exp.func = {};

// Function to output the 8 product thumbnails
exp.func.productThumbs = function(_vars) {
    _vars = _vars || exp.vars;
    var thumbs = '<div class="look-inside-thumbs"> <p class="look-inside-thumbs--title"><a href="#" data-behaviour="lookInsideModal" data-thumb-id="0">See inside</a></p>';
    var thisProduct = _vars.productName[ _vars.productId ];
    var i = 1;
    $.each( _vars.images[ thisProduct ], function( key, value ) {
        if( !value[3] ) {
            thumbs += '<a href="#" data-behaviour="lookInsideModal" data-thumb-id="' + key + '">' +
                      '<img '+((i===1 || i===5 || i===9 ) ? 'class="look-inside-thumbs--first" ' : '')+'src="' + _vars.imagesBase + thisProduct + _vars.imagesTypeFolders['thumbs'] + value[0] + _vars.imagesExtension + '" alt="'+value[1]+'" /></a>';
        }
        i++;
    });
    thumbs += '</div>';
    return thumbs;
};

// Function to add links to the central item list
exp.func.centralList = function(_vars) {
    _vars = _vars || exp.vars;
    var list = '';
    var thisProduct = _vars.productName[ _vars.productId ];
    var i = 1;
    $.each( _vars.images[ thisProduct ], function( key, value ) {
        if( !value[4] ) {
            list += '<li class="setTitle"><a href="#" data-behaviour="lookInsideModal" data-thumb-id="' + key + '"><span class="see-inside-titlelink">' +
                    value[1] + ((value[2] !== '') ? value[2] : '' ) + '</span> <span class="see-inside-hover">See inside</span></a></li>';
        }
        i++;
    });
    return list;
};

// Function to open the modal
exp.vars.lookInsideModal = function( pageId ) {
    var theModal = $('#lookInsideModal');
    theModal.modal();
    $('script + .see-inside--zoom-container').css({'z-index':'-1'});
    $('.see-inside--zoom-container[data-zoom-id="'+pageId+'"]').css({'z-index':'99'});
};

// Function to generate the zoom thumbs
exp.vars.generateThumbs = function(_vars) {
    _vars = _vars || exp.vars;
    var thisProduct = _vars.productName[ _vars.productId ];
    var markup = '';
    var i = 1;
    $.each( _vars.images[ thisProduct ], function( key, value ) {
        markup += '<div class="zoom-item swiper-slide"> \
                       <p><a href="#" data-behaviour="selectZoom" data-thumb-id="' + key + '">'+value[1]+'<span>'+((value[2] !== '') ? value[2] : '')+'</span></a></p> \
                       <a href="#" data-behaviour="selectZoom" data-thumb-id="' + key + '"><img src="'+ _vars.imagesBase + thisProduct + _vars.imagesTypeFolders['viewerThumbs'] + value[0] + _vars.imagesExtension + '" alt="'+value[1]+'" /></a> \
                   </div>';
    });
    return markup;
};

// Function to generate the zoom areas
exp.vars.generateZooms = function(_vars) {
    _vars = _vars || exp.vars;
    var thisProduct = _vars.productName[ _vars.productId ];
    var markup = '';
    var i = 1;
    $.each( _vars.images[ thisProduct ], function( key, value ) {
        markup += '<div class="see-inside--zoom-container" data-zoom-id="' + key + '"> \
                  <div class="see-inside--zoom-container--inner zoom'+i+'"> \
        <img src="'+ _vars.imagesBase + thisProduct + _vars.imagesTypeFolders['viewerMainLarge'] + value[0] + _vars.imagesExtension + '" alt="'+value[1]+'" /></div></div> \
        <script type="text/javascript"> \
            $(".see-inside--zoom-container--inner.zoom'+i+'").zoom({url: "'+_vars.imagesBase + thisProduct + _vars.imagesTypeFolders['zoomed'] + value[0] + _vars.imagesExtension+'"}); \
        </script>';
        i++;
    });
    return markup;
};

exp.vars.generateModalBody = function(_vars) {
    _vars = _vars || exp.vars;
    var thumbs = exp.vars.generateThumbs(_vars);
    var zooms = exp.vars.generateZooms(_vars);
    var markup = ' \
<div class="see-inside--scroller swiper-container"> \
<div class="swiper-wrapper">' +
    thumbs +
'</div></div><!-- .see-inside--scroller --> \
<div class="swiper-scrollbar"></div> \
<div class="see-inside--header"> \
    <h3>'+_vars.productTitle+'</h3>' +
    _vars.buyBlock.wrap('<div />').parent('div').html() +
    '<div class="see-inside--wishlist">'+_vars.wishlistLink.wrap('<div />').parent('div').html()+'</div> \
</div><!-- .see-inside--header --> \
<div class="see-inside--zoom"> \
    <div class="see-inside--zoom-icon"></div> \
    <a href="#" class="see-inside--zoom-nav-up">&nbsp;</a>' +
    zooms +
    '<a href="#" class="see-inside--zoom-nav-bottom">&nbsp;</a> \
</div><!-- .see-inside--zoom --> \
<!-- end see inside -->';
    return markup;
};

// This function waits till a DOM element is available, then runs a callback function
exp.func.waitForElement = function(selector, callback, timeout, keepAlive) {
    timeout = timeout || 20000;
    keepAlive = keepAlive || false;
    var intervalTime = 50,
        maxAttempts = timeout / intervalTime,
        attempts = 0,
        interval = setInterval(function() {
            if ($(selector).length) {
                if (!keepAlive) {
                    clearInterval(interval);
                }
                callback();
            } else if (attempts > maxAttempts) {
                clearInterval(interval);
            }
            attempts ++;
        }, intervalTime);
};

// This function waits till a function is available, then runs a callback function
exp.func.waitForFunction = function(func, callback, timeout, keepAlive) {
    timeout = timeout || 20000;
    keepAlive = keepAlive || false;
    var intervalTime = 50,
        maxAttempts = timeout / intervalTime,
        attempts = 0,
        interval = setInterval(function() {
            if ($.isFunction(func)) {
                if (!keepAlive) {
                    clearInterval(interval);
                }
                callback();
            } else if (attempts > maxAttempts) {
                clearInterval(interval);
            }
            attempts ++;
        }, intervalTime);
};

// Init function
// Called to run the actual experiment, DOM manipulation, event listeners, etc
exp.init = function() {
        
    // append styles to head
    $('head').append('<style type="text/css">'+this.css+'</style>');

    // turn set list into linked set list
    if( $('#setTitles li').length ) {
        $('#setTitles ul').html( this.func.centralList(exp.vars) );
    }

    // add thumbs underneath product image
    $('.productImage:eq(0)').after( this.func.productThumbs(exp.vars) );

    // append modal template to body
    $('#page-browse-product').append( this.vars.modalTemplate );

    // customise modal template
    $('#lookInsideModal .modal-body').html( this.vars.generateModalBody(exp.vars) );

    // attach event listener to modal triggers
    $('[data-behaviour="lookInsideModal"]').bind('click',function(e) {
        e.preventDefault();
        var pageId = $(this).attr('data-thumb-id');
        exp.vars.lookInsideModal( pageId );
    });
/*    $('#lookInsideModal').on('shown', function () {
        alert('shown');
    }); */

    // Initialise swiper
    this.vars.zoomThumbs = new Swiper('.swiper-container', {
        mode: 'vertical',
        loop: false,
        slidesPerView: 3,
        scrollbar: {
            container: '.swiper-scrollbar',
            draggable: false,
            dragSize: 20,
            hide: true,
            snapOnRelease: false
        }
    });

};

// Run the experiment
exp.init();

// Return the experiment object so we can access it later if required
return exp;

// Close the IIFE, passing in jQuery and any other global variables as required
})(jQuery);